{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Chris\\\\Documents\\\\GitHub\\\\ValetProUser\\\\Client\\\\src\\\\components\\\\List\\\\Body.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { batch, useDispatch, useSelector } from \"react-redux\";\nimport { deleteCar, createCar, updateCar } from \"../../_actions/subCars\";\nimport { createPull, deletePull, updatePull } from \"../../_actions/pulls\";\nimport { upForm } from \"../../_actions/updateForm\";\nimport { useNavigate } from \"react-router-dom\";\nimport Button from \"./Button\";\nimport { upReset } from \"../../_actions/updateForm\";\nimport { createOut, deleteOut } from \"../../_actions/outnr\";\nimport { createComp, deleteComp } from \"../../_actions/completed\";\nimport * as api from '../../_api';\n\nconst TableBody = ({\n  sorted,\n  setSubCar,\n  list,\n  carlength,\n  on,\n  day,\n  posts,\n  setTableData,\n  tableData,\n  columns,\n  setPullId,\n  setModal\n}) => {\n  _s();\n\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  const dispatch = useDispatch();\n  let navigate = useNavigate();\n  useEffect(() => {\n    tableData.filter(data => {\n      if (data.type === \"ON\" && !data.room && !data.hot) {\n        data.hot = \"Hot\";\n        dispatch(updateCar(data._id, data));\n        dispatch(updatePull(data._id, data));\n      } else if (data.type === \"ON\" && data.room && data.hot) {\n        data.hot = \"\";\n        dispatch(updateCar(data._id, data));\n        dispatch(updatePull(data._id, data));\n      }\n    });\n  });\n  /*  useEffect(() => {\r\n       tableData.filter((data) => {\r\n         if (!data.complete && data.status===\"Returning\") {\r\n           data.complete=\"Complete\"\r\n           dispatch(updatePull(data._id, data))\r\n         }      \r\n       })\r\n     }) \r\n   \r\n     useEffect(() => {\r\n       tableData.filter((data) => {\r\n         if (!data.complete && data.status===\"Checking Out\") {\r\n           data.complete=\"Complete\"                 \r\n           dispatch(updatePull(data._id, data))\r\n         }      \r\n       })\r\n     }) */\n\n  /* useEffect(() => {\r\n    tableData.filter((data) => {\r\n      if (list===\"cars\" && data.status===\"checkout\") {\r\n        data.status=\"Checking Out\"\r\n        data.complete=\"Complete\"\r\n        dispatch(deleteCar(data._id))  \r\n       api.createPull(data)\r\n      }else if(list===\"pulls\" && data.status===\"checkout\"){\r\n        data.status=\"Checking Out\"\r\n        data.complete=\"Completed\"\r\n       api.createComp(data)\r\n      dispatch(deletePull(data._id)) \r\n        }\r\n   })\r\n   })  */\n\n  /* useEffect(() => {\r\n     tableData.filter((data) => {\r\n       if (list===\"cars\" && data.status===\"return\") {\r\n       data.complete=\"Complete\"\r\n       data.status=\"Returning\"\r\n       api.createPull(data)\r\n       dispatch(deleteCar(data._id))\r\n       }else if(list===\"pulls\" && data.status===\"return\"){\r\n         data.status=\"Returning\"\r\n         data.complete=\"Completed\"\r\n        api.createOut(data)\r\n       dispatch(deletePull(data._id)) \r\n       }\r\n     })\r\n   })*/\n\n  useEffect(() => {\n    tableData.filter(data => {\n      if (list === \"cars\" && !data.complete && data.payment && data.price) {\n        data.complete = \"Complete\";\n        data.status = \"Paid\";\n        api.createPull(data);\n        dispatch(deleteCar(data._id));\n      } else if (list === \"pulls\" && !data.complete && data.payment && data.price) {\n        data.complete = \"Paid\";\n        data.status = \"Paid\";\n        const _id = data._id;\n        dispatch(updatePull(_id, data));\n      }\n    });\n  });\n\n  const handleUpdate = e => {\n    const evt = e.target.value;\n    tableData.filter(data => {\n      if (evt === data._id) {\n        dispatch(upForm(data));\n        setSubCar(true);\n      }\n    });\n  };\n\n  const handleComp = e => {\n    const evt = e.target.value;\n    tableData.filter(data => {\n      if (evt === data._id && data.status === \"Returning\") {\n        data.complete = \"Completed\";\n        dispatch(deletePull(data._id));\n        api.createOut(data);\n      } else if (evt === data._id && data.status !== \"Returning\") {\n        data.complete = \"Completed\";\n        dispatch(deletePull(data._id));\n        api.createComp(data);\n      }\n    });\n  };\n\n  const handleRepark = e => {\n    const evt = e.target.value;\n    tableData.filter(data => {\n      if (evt === data._id) {\n        data.payment = \"\";\n        data.complete = \"\";\n        data.status = \"repark\";\n        api.createCar(data);\n        setTableData([...sorted]);\n        dispatch(deletePull(data._id));\n        dispatch(deleteComp(data._id));\n        dispatch(deleteOut(data._id));\n      }\n    });\n  };\n\n  const handleModal = e => {\n    setModal(true);\n    setPullId(e.target.value);\n    const evt = e.target.value;\n    tableData.filter(data => {\n      if (evt === data._id) {\n        dispatch(upForm(data));\n      }\n    });\n  };\n\n  const handleOuts = e => {\n    const evt = e.target.value;\n    tableData.filter(data => {\n      if (evt === data._id) {\n        data.status = \"Checking Out\";\n        api.createComp(data);\n        dispatch(deleteOut(data._id));\n      }\n    });\n  };\n  /* mass delete if needed  \r\n      useEffect(()=>{\r\n      tableData.map((data) => {\r\n      dispatch(deletePull(data._id))  \r\n      dispatch(deleteCar(data._id))\r\n      dispatch(deleteComp(data._id)) \r\n      dispatch(deleteOut(data._id))\r\n    })})*/\n\n\n  return /*#__PURE__*/_jsxDEV(\"tbody\", {\n    children: [/*#__PURE__*/_jsxDEV(\"tr\", {\n      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"search...\",\n          onChange: event => {\n            setSearchTerm(event.target.value);\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: [carlength, \"\\xA0cars\\xA0total\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"but\",\n          onClick: () => setSubCar(true),\n          children: \"Add new car\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"but\",\n          onClick: () => setSubCar(true),\n          children: \"Scan\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 9\n    }, this), tableData.filter(data => {\n      if (!on && !day) {\n        return data;\n      } else if (!on) {\n        var _data$type;\n\n        return (_data$type = data.type) === null || _data$type === void 0 ? void 0 : _data$type.includes(\"ON\");\n      } else if (!day) {\n        var _data$type2;\n\n        return (_data$type2 = data.type) === null || _data$type2 === void 0 ? void 0 : _data$type2.includes(\"DAY\");\n      }\n    }).filter(data => {\n      var _data$ticket, _data$name, _data$room, _data$vmake, _data$vcolor, _data$vmodel;\n\n      if (searchTerm === \"\") {\n        return data;\n      } else if ((_data$ticket = data.ticket) === null || _data$ticket === void 0 ? void 0 : _data$ticket.toLowerCase().includes(searchTerm.toLowerCase())) {\n        return data;\n      } else if ((_data$name = data.name) === null || _data$name === void 0 ? void 0 : _data$name.toLowerCase().includes(searchTerm.toLowerCase())) {\n        return data;\n      } else if ((_data$room = data.room) === null || _data$room === void 0 ? void 0 : _data$room.toLowerCase().includes(searchTerm.toLowerCase())) {\n        return data;\n      } else if ((_data$vmake = data.vmake) === null || _data$vmake === void 0 ? void 0 : _data$vmake.toLowerCase().includes(searchTerm.toLowerCase())) {\n        return data;\n      } else if ((_data$vcolor = data.vcolor) === null || _data$vcolor === void 0 ? void 0 : _data$vcolor.toLowerCase().includes(searchTerm.toLowerCase())) {\n        return data;\n      } else if ((_data$vmodel = data.vmodel) === null || _data$vmodel === void 0 ? void 0 : _data$vmodel.toLowerCase().includes(searchTerm.toLowerCase())) {\n        return data;\n      }\n    }).map(data => {\n      return /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: [/*#__PURE__*/_jsxDEV(\"td\", {\n          className: \"listbtn\",\n          children: [!data.complete && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"but\",\n            value: data._id,\n            onClick: handleModal,\n            children: \"Process\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 23\n          }, this), list === \"pulls\" && data.complete && !data.hot && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"but\",\n            value: data._id,\n            onClick: handleComp,\n            children: \"Completed\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 218,\n            columnNumber: 23\n          }, this), list === \"pulls\" && data.complete && data.hot && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"but\",\n            value: data._id,\n            onClick: handleModal,\n            children: \"+ Room\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 223,\n            columnNumber: 23\n          }, this), list === \"outs\" && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"but\",\n            value: data._id,\n            onClick: handleOuts,\n            children: \"Checkout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"but\",\n            type: \"button\",\n            value: data._id,\n            onClick: handleUpdate,\n            children: \"Edit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"but\",\n            type: \"button\",\n            value: data._id,\n            onClick: () => dispatch(deletePull(data._id)) && dispatch(deleteCar(data._id)) && dispatch(deleteComp(data._id)) && dispatch(deleteOut(data._id)),\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 21\n          }, this), data.complete && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"but\",\n            value: data._id,\n            onClick: handleRepark,\n            children: \"Repark\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 23\n          }, this), data.status === \"process\" && /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"but\",\n            value: data._id,\n            onClick: handleRepark,\n            children: \"Repark\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 23\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 19\n        }, this), columns.map(({\n          accessor\n        }) => {\n          const tData = data[accessor] ? data[accessor] : \"\";\n          return /*#__PURE__*/_jsxDEV(\"td\", {\n            className: data.hot ? \"hotlist\" : data.complete ? \"complist\" : data.type === \"DAY\" ? \"daylist\" : \"deflist\",\n            children: tData\n          }, accessor, false, {\n            fileName: _jsxFileName,\n            lineNumber: 250,\n            columnNumber: 28\n          }, this);\n        })]\n      }, data._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 17\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 175,\n    columnNumber: 7\n  }, this);\n};\n\n_s(TableBody, \"Tif0vmwun+ec4PXBQNQO9/AAggI=\", false, function () {\n  return [useDispatch, useNavigate];\n});\n\n_c = TableBody;\nexport default TableBody;\n\nvar _c;\n\n$RefreshReg$(_c, \"TableBody\");","map":{"version":3,"sources":["C:/Users/Chris/Documents/GitHub/ValetProUser/Client/src/components/List/Body.js"],"names":["React","useEffect","useState","batch","useDispatch","useSelector","deleteCar","createCar","updateCar","createPull","deletePull","updatePull","upForm","useNavigate","Button","upReset","createOut","deleteOut","createComp","deleteComp","api","TableBody","sorted","setSubCar","list","carlength","on","day","posts","setTableData","tableData","columns","setPullId","setModal","searchTerm","setSearchTerm","dispatch","navigate","filter","data","type","room","hot","_id","complete","payment","price","status","handleUpdate","e","evt","target","value","handleComp","handleRepark","handleModal","handleOuts","event","includes","ticket","toLowerCase","name","vmake","vcolor","vmodel","map","accessor","tData"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\"\r\nimport { batch, useDispatch, useSelector } from \"react-redux\";\r\nimport { deleteCar, createCar, updateCar } from \"../../_actions/subCars\";\r\nimport { createPull, deletePull, updatePull } from \"../../_actions/pulls\";\r\nimport { upForm } from \"../../_actions/updateForm\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Button from \"./Button\";\r\nimport { upReset } from \"../../_actions/updateForm\";\r\nimport { createOut, deleteOut } from \"../../_actions/outnr\";\r\nimport { createComp, deleteComp } from \"../../_actions/completed\";\r\nimport * as api from '../../_api';\r\n\r\nconst TableBody = ({sorted, setSubCar, list, carlength, on, day, posts, setTableData, tableData, columns, setPullId, setModal }) => {\r\n\r\n    const [searchTerm, setSearchTerm] = useState(\"\");\r\n    const dispatch = useDispatch();\r\n    let navigate = useNavigate()\r\n\r\n   \r\n\r\n    useEffect(() => {\r\n      tableData.filter((data) => {\r\n        if (data.type===\"ON\" && !data.room && !data.hot) {\r\n          data.hot=\"Hot\"\r\n          dispatch(updateCar(data._id, data))\r\n          dispatch(updatePull(data._id, data))\r\n        }      \r\n        else if(data.type===\"ON\" && data.room && data.hot) {\r\n          data.hot=\"\"\r\n          dispatch(updateCar(data._id, data))\r\n          dispatch(updatePull(data._id, data))\r\n        } \r\n      })\r\n    }) \r\n\r\n\r\n /*  useEffect(() => {\r\n      tableData.filter((data) => {\r\n        if (!data.complete && data.status===\"Returning\") {\r\n          data.complete=\"Complete\"\r\n          dispatch(updatePull(data._id, data))\r\n        }      \r\n      })\r\n    }) \r\n  \r\n    useEffect(() => {\r\n      tableData.filter((data) => {\r\n        if (!data.complete && data.status===\"Checking Out\") {\r\n          data.complete=\"Complete\"                 \r\n          dispatch(updatePull(data._id, data))\r\n        }      \r\n      })\r\n    }) */\r\n\r\n    /* useEffect(() => {\r\n      tableData.filter((data) => {\r\n        if (list===\"cars\" && data.status===\"checkout\") {\r\n          data.status=\"Checking Out\"\r\n          data.complete=\"Complete\"\r\n          dispatch(deleteCar(data._id))  \r\n         api.createPull(data)\r\n        }else if(list===\"pulls\" && data.status===\"checkout\"){\r\n          data.status=\"Checking Out\"\r\n          data.complete=\"Completed\"\r\n         api.createComp(data)\r\n        dispatch(deletePull(data._id)) \r\n\r\n        }\r\n     })\r\n     })  */\r\n\r\n   /* useEffect(() => {\r\n      tableData.filter((data) => {\r\n        if (list===\"cars\" && data.status===\"return\") {\r\n        data.complete=\"Complete\"\r\n        data.status=\"Returning\"\r\n        api.createPull(data)\r\n        dispatch(deleteCar(data._id))\r\n        }else if(list===\"pulls\" && data.status===\"return\"){\r\n          data.status=\"Returning\"\r\n          data.complete=\"Completed\"\r\n         api.createOut(data)\r\n        dispatch(deletePull(data._id)) \r\n        }\r\n      })\r\n    })*/\r\n\r\n    useEffect(() => {\r\n      tableData.filter((data) => {\r\n        if (list===\"cars\" && !data.complete && data.payment && data.price  ) {  \r\n        data.complete=\"Complete\"\r\n        data.status=\"Paid\"\r\n        api.createPull(data)\r\n        dispatch(deleteCar(data._id))\r\n        } else if (list===\"pulls\" && !data.complete && data.payment && data.price  ) {  \r\n          data.complete=\"Paid\"\r\n          data.status=\"Paid\"\r\n          const _id = data._id\r\n       dispatch(updatePull(_id, data))\r\n          }\r\n      })\r\n    })\r\n\r\n    const handleUpdate = (e) => {\r\n      const evt = e.target.value\r\n      tableData.filter((data) => {\r\n        if (evt === data._id) {\r\n       dispatch(upForm(data));\r\n       setSubCar(true);\r\n      }\r\n      })}\r\n\r\n    const handleComp = (e) => {\r\n      const evt = e.target.value\r\n        tableData.filter((data) => {\r\n\r\n        if(evt===data._id && data.status===\"Returning\"){ \r\n          data.complete=\"Completed\"\r\n          dispatch(deletePull(data._id))      \r\n          api.createOut(data)\r\n\r\n          }else if(evt===data._id && data.status!==\"Returning\"){  \r\n           data.complete=\"Completed\"\r\n          dispatch(deletePull(data._id))        \r\n          api.createComp(data) \r\n          \r\n          }\r\n      })}\r\n      const handleRepark = (e) => {\r\n        const evt = e.target.value\r\n          tableData.filter((data) => {\r\n  \r\n          if(evt===data._id){ \r\n            data.payment=\"\"\r\n            data.complete=\"\"\r\n            data.status=\"repark\"\r\n            api.createCar(data)\r\n            setTableData([...sorted])\r\n\r\n            dispatch(deletePull(data._id))\r\n            dispatch(deleteComp(data._id))  \r\n            dispatch(deleteOut(data._id))     \r\n            }\r\n        })}\r\n\r\n        const handleModal = (e) => {\r\n          setModal(true);\r\n          setPullId(e.target.value)\r\n          const evt = e.target.value\r\n          tableData.filter((data) => {\r\n            if (evt === data._id) {\r\n            dispatch(upForm(data))}\r\n            \r\n          })}\r\n\r\n          const handleOuts = (e) => {\r\n            const evt = e.target.value\r\n              tableData.filter((data) => {\r\n              if(evt===data._id){ \r\n                data.status=\"Checking Out\"\r\n                api.createComp(data)\r\n                dispatch(deleteOut(data._id)) }    \r\n              })}\r\n\r\n        /* mass delete if needed  \r\n            useEffect(()=>{\r\n            tableData.map((data) => {\r\n            dispatch(deletePull(data._id))  \r\n            dispatch(deleteCar(data._id))\r\n            dispatch(deleteComp(data._id)) \r\n            dispatch(deleteOut(data._id))\r\n          })})*/\r\n\r\n    return (\r\n      <tbody>\r\n        <tr>\r\n          <td>\r\n          <input type=\"text\" placeholder=\"search...\" onChange={(event) => {\r\n         setSearchTerm(event.target.value);}}/>\r\n         </td>\r\n         <td>\r\n             {carlength}&nbsp;cars&nbsp;total\r\n            </td>\r\n            <td>\r\n              <button className=\"but\" onClick={()=>setSubCar(true)} >Add new car</button>\r\n              <button className=\"but\" onClick={()=>setSubCar(true)} >Scan</button>\r\n\r\n            </td>\r\n            </tr>\r\n            {tableData.filter((data) => {\r\n            \r\n          \r\n            if (!on && !day) { return data; }\r\n            else if (!on) { return data.type?.includes(\"ON\"); }\r\n            else if (!day) { return data.type?.includes(\"DAY\"); }\r\n          })\r\n            .filter((data) => {\r\n              if (searchTerm === \"\") {\r\n                return data;\r\n            } else if (data.ticket?.toLowerCase().includes(searchTerm.toLowerCase())) { return data; }\r\n              else if (data.name?.toLowerCase().includes(searchTerm.toLowerCase())) { return data; }\r\n              else if (data.room?.toLowerCase().includes(searchTerm.toLowerCase())) { return data; }\r\n              else if (data.vmake?.toLowerCase().includes(searchTerm.toLowerCase())) { return data; }\r\n              else if (data.vcolor?.toLowerCase().includes(searchTerm.toLowerCase())) { return data; }\r\n              else if (data.vmodel?.toLowerCase().includes(searchTerm.toLowerCase())) { return data; }\r\n            })\r\n            .map((data) => {\r\n              return (\r\n                <tr  key={data._id}>\r\n\r\n                  <td className=\"listbtn\">\r\n\r\n                    {!data.complete && (\r\n                      <button className=\"but\" value={data._id}\r\n                        onClick={handleModal}>Process</button>)}\r\n\r\n                    {list===\"pulls\" && data.complete && !data.hot &&(\r\n                      <button className=\"but\" value={data._id}\r\n                        onClick={handleComp}>Completed</button>\r\n                    )}\r\n\r\n                    {list===\"pulls\" && data.complete && data.hot &&(\r\n                      <button className=\"but\" value={data._id}\r\n                        onClick={handleModal}>+ Room</button>\r\n                    )}\r\n\r\n                    {list===\"outs\" && (\r\n                      <button className=\"but\" value={data._id}\r\n                        onClick={handleOuts} >Checkout</button>\r\n                    )}\r\n\r\n                    <button className=\"but\" type=\"button\"  value={data._id} onClick={handleUpdate}>Edit</button>\r\n\r\n                    <button className=\"but\" type=\"button\"  value={data._id} onClick={() => dispatch(deletePull(data._id)) && dispatch(deleteCar(data._id))\r\n                      && dispatch(deleteComp(data._id)) && dispatch(deleteOut(data._id))}>\r\n                   Delete</button>\r\n\r\n                      {data.complete && (\r\n                      <button className=\"but\" value={data._id}\r\n                        onClick={handleRepark}>Repark</button>\r\n                    )}\r\n                    {data.status===\"process\" && (\r\n                      <button className=\"but\" value={data._id}\r\n                        onClick={handleRepark}>Repark</button>\r\n                    )}\r\n                  </td>\r\n\r\n                  {columns.map(({ accessor }) => {\r\n                    const tData = data[accessor] ? data[accessor] : \"\";                 \r\n                    return <td className={data.hot ? \"hotlist\" : data.complete ? \"complist\" : data.type===\"DAY\" ? \"daylist\" : \"deflist\" }  \r\n                    key={accessor}>{tData}</td>;}  \r\n                  )}\r\n                </tr>\r\n              );\r\n            })}\r\n        </tbody>    \r\n            );\r\n  };\r\n  \r\n  export default TableBody;"]},"metadata":{},"sourceType":"module"}