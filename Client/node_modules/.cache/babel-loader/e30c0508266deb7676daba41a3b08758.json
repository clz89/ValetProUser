{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Chris\\\\Documents\\\\GitHub\\\\ValetProUser\\\\Client\\\\src\\\\components\\\\List\\\\List.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport TableBody from \"./Body\";\nimport TableHead from \"./Head\";\nimport SubCar from \"../SubCar/SubCar\";\nimport Modal from \"./Modal\";\nimport \"./List.css\";\nimport { useDispatch, batch } from 'react-redux';\nimport { createPull, updatePull } from \"../../_actions/pulls\";\nimport { deleteCar } from \"../../_actions/subCars\";\nimport Scanner from \"../Scanner/Scanner\";\n\nconst List = ({\n  scan,\n  setScan,\n  setFormT,\n  setSubCar,\n  subcar,\n  PullsM,\n  CarsM,\n  list,\n  posts,\n  x\n}) => {\n  _s();\n\n  const dispatch = useDispatch();\n  useEffect(() => {\n    dispatch(x);\n  }, [dispatch]);\n  const sortedData = posts.sort((a, b) => {\n    const dateAInMillis = new Date(a.createdAt).getTime();\n    const dateBInMillis = new Date(b.createdAt).getTime();\n    return dateBInMillis - dateAInMillis;\n  });\n  const json = localStorage.getItem(\"states2\");\n  const states = JSON.parse(json);\n  const [sortField, setSortField] = useState(states ? states.accessor : \"createdAt\");\n  const [order, setOrder] = useState(states ? states.sortOrder : \"desc\");\n  const sorted = posts.sort((a, b) => {\n    var _a$sortField, _b$sortField;\n\n    if (a[sortField] === null) return 1;\n    if (b[sortField] === null) return -1;\n    if (a[sortField] === null && b[sortField] === null) return 0;\n    return ((_a$sortField = a[sortField]) === null || _a$sortField === void 0 ? void 0 : _a$sortField.toString().localeCompare((_b$sortField = b[sortField]) === null || _b$sortField === void 0 ? void 0 : _b$sortField.toString(), \"en\", {\n      numeric: true\n    })) * (order === \"asc\" ? 1 : -1);\n  });\n  const [tableData, setTableData] = useState(sorted ? sorted : posts);\n  const [on, setOn] = useState(false);\n  const [day, setDay] = useState(false);\n  const [modal, setModal] = useState(false);\n  const [pullId, setPullId] = useState();\n  const [carlength, setCarLength] = useState(tableData.length);\n  useEffect(() => {\n    setCarLength(tableData.length);\n  }, [tableData]);\n  useEffect(() => {\n    const jsont = JSON.stringify(posts);\n    localStorage.setItem(\"posts\", jsont);\n  });\n  useEffect(() => {\n    const sorted = posts.sort((a, b) => {\n      var _a$sortField2, _b$sortField2;\n\n      if (a[sortField] === null) return 1;\n      if (b[sortField] === null) return -1;\n      if (a[sortField] === null && b[sortField] === null) return 0;\n      return ((_a$sortField2 = a[sortField]) === null || _a$sortField2 === void 0 ? void 0 : _a$sortField2.toString().localeCompare((_b$sortField2 = b[sortField]) === null || _b$sortField2 === void 0 ? void 0 : _b$sortField2.toString(), \"en\", {\n        numeric: true\n      })) * (order === \"asc\" ? 1 : -1);\n    });\n    setTableData(sorted);\n  }, [posts]);\n  const columns = [{\n    label: \"Type:\",\n    accessor: \"type\",\n    sortable: true\n  }, {\n    label: \"Id:\",\n    accessor: \"_id\",\n    sortable: true\n  }, {\n    label: \"Ticket #:\",\n    accessor: \"ticket\",\n    sortable: true\n  }, {\n    label: \"Name:\",\n    accessor: \"name\",\n    sortable: true\n  }, {\n    label: \"Room:\",\n    accessor: \"room\",\n    sortable: true\n  }, {\n    label: \"Departure:\",\n    accessor: \"depart\",\n    sortable: true\n  }, {\n    label: \"Vehicle color:\",\n    accessor: \"vcolor\",\n    sortable: true\n  }, {\n    label: \"Vehicle make:\",\n    accessor: \"vmake\",\n    sortable: true\n  }, {\n    label: \"Vehicle model:\",\n    accessor: \"vmodel\",\n    sortable: true\n  }, {\n    label: \"VIP:\",\n    accessor: \"vip\",\n    sortable: true\n  }, {\n    label: \"Retrieve at:\",\n    accessor: \"retrieve\",\n    sortable: true\n  }, {\n    label: \"OutFront:\",\n    accessor: \"outfront\",\n    sortable: true\n  }, {\n    label: \"Notes:\",\n    accessor: \"notes\",\n    sortable: true\n  }, {\n    label: \"Parking spot:\",\n    accessor: \"pspot\",\n    sortable: true\n  }, {\n    label: \"License plate:\",\n    accessor: \"license\",\n    sortable: true\n  }, {\n    label: \"Hot:\",\n    accessor: \"hot\",\n    sortable: true\n  }, {\n    label: \"Price:\",\n    accessor: \"price\",\n    sortable: true\n  }, {\n    label: \"Payment:\",\n    accessor: \"payment\",\n    sortable: true\n  }, {\n    label: \"Status:\",\n    accessor: \"status\",\n    sortable: true\n  }, {\n    label: \"Completed:\",\n    accessor: \"complete\",\n    sortable: true\n  }, {\n    label: \"Issued:\",\n    accessor: \"createdAt\",\n    sortable: true\n  }];\n  useEffect(() => {\n    if (carlength !== undefined) {\n      const jsont = JSON.stringify(carlength);\n      localStorage.setItem(\"carlength\", jsont);\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"table_container\",\n      children: [scan && /*#__PURE__*/_jsxDEV(Scanner, {\n        setScan: setScan,\n        ...{\n          setFormT,\n          x,\n          list,\n          tableData,\n          setTableData,\n          posts,\n          scan,\n          setScan\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 16\n      }, this), subcar && /*#__PURE__*/_jsxDEV(SubCar, {\n        setSubCar: setSubCar,\n        ...{\n          scan,\n          setScan,\n          setFormT,\n          x,\n          list,\n          tableData,\n          setTableData,\n          posts,\n          setSubCar\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 20\n      }, this), modal === true && /*#__PURE__*/_jsxDEV(Modal, {\n        setModal: setModal,\n        ...{\n          carlength,\n          setModal,\n          tableData,\n          setPullId,\n          pullId,\n          PullsM,\n          CarsM\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TableHead, { ...{\n          states,\n          on,\n          day,\n          setDay,\n          setOn,\n          columns,\n          tableData,\n          setTableData\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(TableBody, { ...{\n          scan,\n          setScan,\n          sorted,\n          setSubCar,\n          list,\n          carlength,\n          x,\n          setPullId,\n          setModal,\n          on,\n          day,\n          columns,\n          setTableData,\n          tableData,\n          posts\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(List, \"qOIgTEff/LIF6tNE3NFexYR+1eY=\", false, function () {\n  return [useDispatch];\n});\n\n_c = List;\nexport default List;\n\nvar _c;\n\n$RefreshReg$(_c, \"List\");","map":{"version":3,"sources":["C:/Users/Chris/Documents/GitHub/ValetProUser/Client/src/components/List/List.js"],"names":["useState","useEffect","TableBody","TableHead","SubCar","Modal","useDispatch","batch","createPull","updatePull","deleteCar","Scanner","List","scan","setScan","setFormT","setSubCar","subcar","PullsM","CarsM","list","posts","x","dispatch","sortedData","sort","a","b","dateAInMillis","Date","createdAt","getTime","dateBInMillis","json","localStorage","getItem","states","JSON","parse","sortField","setSortField","accessor","order","setOrder","sortOrder","sorted","toString","localeCompare","numeric","tableData","setTableData","on","setOn","day","setDay","modal","setModal","pullId","setPullId","carlength","setCarLength","length","jsont","stringify","setItem","columns","label","sortable","undefined"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\r\n\r\nimport TableBody from \"./Body\";\r\nimport TableHead from \"./Head\";\r\nimport SubCar from \"../SubCar/SubCar\";\r\nimport  Modal  from \"./Modal\";\r\nimport \"./List.css\"\r\nimport { useDispatch, batch } from 'react-redux';\r\nimport { createPull, updatePull } from \"../../_actions/pulls\";\r\nimport { deleteCar } from \"../../_actions/subCars\";\r\nimport Scanner from \"../Scanner/Scanner\";\r\n\r\nconst List = ({ scan, setScan, setFormT, setSubCar, subcar, PullsM, CarsM,  list, posts, x}) => {\r\n\r\n  const dispatch = useDispatch();\r\n \r\n  useEffect(() => {\r\n  dispatch(x);\r\n  }, [ dispatch])\r\n  \r\n  const sortedData = posts.sort((a, b) => {\r\n    const dateAInMillis = (new Date(a.createdAt)).getTime();\r\n    const dateBInMillis = (new Date(b.createdAt)).getTime();\r\n    \r\n    return dateBInMillis - dateAInMillis;})\r\n\r\n    const json = localStorage.getItem(\"states2\");\r\n  const states = JSON.parse(json);\r\n\r\n    const [sortField, setSortField] = useState(states ? states.accessor : \"createdAt\");\r\n    const [order, setOrder] = useState(states ? states.sortOrder : \"desc\");\r\n\r\n    \r\n        const sorted = posts.sort((a, b,) => {\r\n          if (a[sortField] === null) return 1;\r\n          if (b[sortField] === null) return -1;\r\n          if (a[sortField] === null && b[sortField] === null) return 0;\r\n          return (\r\n            a[sortField]?.toString().localeCompare(b[sortField]?.toString(), \"en\", {\r\n              numeric: true,\r\n            }) * (order === \"asc\" ? 1 : -1)\r\n          );\r\n        });\r\n        \r\n      \r\n    \r\n\r\nconst [tableData, setTableData] = useState(sorted ? sorted : posts);\r\nconst [on, setOn] = useState(false) ;\r\nconst [day, setDay] = useState(false) ;\r\nconst [modal, setModal] = useState(false);\r\nconst [pullId, setPullId] = useState()\r\nconst [carlength, setCarLength] = useState(tableData.length)\r\n\r\nuseEffect(()=>{\r\n  setCarLength(tableData.length)\r\n}, [tableData])\r\n\r\n  useEffect(()=> {\r\n    const jsont = JSON.stringify(posts);\r\n      localStorage.setItem(\"posts\", jsont);\r\n  })\r\n  \r\n  \r\n  useEffect(()=> { \r\n    const sorted = posts.sort((a, b,) => {\r\n      if (a[sortField] === null) return 1;\r\n      if (b[sortField] === null) return -1;\r\n      if (a[sortField] === null && b[sortField] === null) return 0;\r\n      return (\r\n        a[sortField]?.toString().localeCompare(b[sortField]?.toString(), \"en\", {\r\n          numeric: true,\r\n        }) * (order === \"asc\" ? 1 : -1)\r\n      );\r\n    });\r\n      setTableData(sorted)\r\n\r\n }, [posts] )\r\n\r\n\r\n \r\n  const columns = [ \r\n    { label: \"Type:\", accessor: \"type\", sortable: true },\r\n    { label: \"Id:\", accessor: \"_id\", sortable: true },\r\n    { label: \"Ticket #:\", accessor: \"ticket\", sortable: true },\r\n    { label: \"Name:\", accessor: \"name\", sortable: true },\r\n    { label: \"Room:\", accessor: \"room\", sortable: true },\r\n    { label: \"Departure:\", accessor: \"depart\", sortable: true },\r\n    { label: \"Vehicle color:\", accessor: \"vcolor\", sortable: true },\r\n    { label: \"Vehicle make:\", accessor: \"vmake\", sortable: true },\r\n    { label: \"Vehicle model:\", accessor: \"vmodel\", sortable: true },\r\n    { label: \"VIP:\", accessor: \"vip\", sortable: true },\r\n    { label: \"Retrieve at:\", accessor: \"retrieve\", sortable: true },\r\n    { label: \"OutFront:\", accessor: \"outfront\", sortable: true },\r\n    { label: \"Notes:\", accessor: \"notes\", sortable: true },\r\n    { label: \"Parking spot:\", accessor: \"pspot\", sortable: true },\r\n    { label: \"License plate:\", accessor: \"license\", sortable: true },\r\n    { label: \"Hot:\", accessor: \"hot\", sortable: true },\r\n    { label: \"Price:\", accessor: \"price\", sortable: true },\r\n    { label: \"Payment:\", accessor: \"payment\", sortable: true },\r\n    { label: \"Status:\", accessor: \"status\", sortable: true },\r\n    { label: \"Completed:\", accessor: \"complete\", sortable: true },\r\n    { label: \"Issued:\", accessor: \"createdAt\", sortable: true }\r\n\r\n  ];\r\n \r\n  \r\n\r\n    useEffect(()=> {\r\n    \r\n\r\n        if(carlength!==undefined){\r\n          const jsont = JSON.stringify(carlength);\r\n          localStorage.setItem(\"carlength\", jsont);}\r\n      })\r\n\r\n  return (\r\n    <>\r\n    \r\n      <table className=\"table_container\">\r\n      {scan &&(<Scanner setScan={setScan} {...{setFormT, x, list, tableData, setTableData, posts, scan, setScan, }}/>)}\r\n        {subcar &&(<SubCar setSubCar={setSubCar} {...{scan, setScan, setFormT, x, list, tableData, setTableData, posts, setSubCar}}/>)}\r\n        {modal===true&&(\r\n        <Modal setModal={setModal}  {...{ carlength, setModal, tableData, setPullId, pullId, PullsM, CarsM}}/>)}\r\n        <TableHead {...{states, on, day, setDay, setOn, columns, tableData, setTableData}} />\r\n        <TableBody  {...{ scan, setScan, sorted, setSubCar, list, carlength, x, setPullId, setModal, on, day, columns, setTableData, tableData, posts }} />\r\n      \r\n      </table>\r\n      \r\n    </>\r\n  );\r\n};\r\n\r\nexport default List;"]},"metadata":{},"sourceType":"module"}