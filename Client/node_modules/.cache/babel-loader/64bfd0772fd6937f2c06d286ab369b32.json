{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Chris\\\\Documents\\\\GitHub\\\\ValetProUser\\\\Client\\\\src\\\\components\\\\SubCar\\\\SubCar.js\",\n    _s = $RefreshSig$();\n\nimport React, { useReducer, useState, useEffect } from 'react';\nimport DatePicker from 'react-date-picker';\nimport './SubCar.css';\nimport { createCar, updateCar } from '../../_actions/subCars';\nimport { updatePull } from '../../_actions/pulls';\nimport { updateComp } from '../../_actions/completed';\nimport { updateOut } from '../../_actions/outnr';\nimport { useNavigate } from 'react-router';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { upReset } from '../../_actions/updateForm';\nimport Modal from './Modal';\nimport * as api from '../../_api';\nimport _ from 'lodash';\n\nconst formReducer = (state, event) => {\n  if (event.reset) {\n    return {\n      price: \"$44\",\n      type: \"ON\"\n    };\n  } else if (state.vcolor) {\n    return { ...state,\n      [event.name]: event.value\n    };\n  }\n\n  return { ...state,\n    [event.name]: event.value\n  };\n};\n\nfunction SubCar({\n  vehicle,\n  setVehicle,\n  scan,\n  setScan,\n  list,\n  tableData,\n  setTableData,\n  posts,\n  x,\n  setSubCar,\n  formT,\n  setFormT\n}) {\n  _s();\n\n  const post = useSelector(state => state.updateForm);\n  const pos = Object.values(post);\n  const [modal, setModal] = useState(false);\n  const [modalid, setModalId] = useState(\"\");\n  useEffect(() => {\n    const jso = JSON.stringify(post);\n    localStorage.setItem(\"upform\", jso);\n  });\n  const json = localStorage.getItem(\"formdata\");\n  const savedNotes = JSON.parse(json);\n  const json2 = localStorage.getItem(\"scan\");\n  const scan1 = JSON.parse(json2);\n  const dispatch = useDispatch();\n  const length = pos.length;\n  const [formData, setFormData] = useReducer(formReducer, scan1 ? scan1 : length !== 0 && post._id !== 1 ? post : savedNotes ? savedNotes : {\n    price: \"$44\",\n    type: \"ON\"\n  });\n  let navigate = useNavigate();\n  useEffect(() => {\n    const json = JSON.stringify(vehicle.vcolor + \" \" + vehicle.vmake);\n    const vstring1 = json.replaceAll(\"[/']\", \"\");\n    formData.vehicle = vstring1;\n    console.log(vstring1);\n  }, [formData, vehicle.vcolor, vehicle.vmake]);\n  useEffect(() => {\n    if (formData.vip) {\n      formData.vip = \"VIP\";\n    } else if (!formData.vip) {\n      formData.vip = \"\";\n    }\n  });\n  useEffect(() => {\n    if (formData.outfront) {\n      formData.outfront = \"outfront\";\n    } else if (!formData.outfront) {\n      formData.outfront = \"\";\n    }\n  });\n\n  const handleType = () => {\n    if (formData.type === \"ON\") {\n      formData.price = \"$20\";\n      formData.type = \"DAY\";\n      setFormData(formData);\n    } else if (formData.type === \"DAY\") {\n      formData.price = \"$44\";\n      formData.type = \"ON\";\n      setFormData(formData);\n    }\n  };\n\n  const handleClick = () => {\n    const form = {\n      price: \"$44\",\n      type: \"ON\"\n    };\n    let o = Object.fromEntries(Object.entries(formData).filter(([_, v]) => v !== \"\"));\n\n    const formt = _.isEqual(o, form);\n\n    if (formData._id === post._id) {\n      setFormData({\n        reset: true\n      });\n      setFormT(false);\n      dispatch(upReset(post));\n      console.log(formT);\n    } else if (formt) {\n      setFormT(false);\n      console.log(formT);\n    } else {\n      setFormT(true);\n      console.log(formT);\n    }\n\n    ;\n    console.log(post);\n  };\n\n  const resetForm = () => {\n    const jsont = JSON.stringify(null);\n    localStorage.setItem(\"scan\", jsont);\n    setFormData({\n      reset: true\n    });\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n\n    if (formData._id === post._id) {\n      const _id = formData._id;\n      dispatch(updateCar(_id, formData));\n      dispatch(updatePull(_id, formData));\n      dispatch(updateComp(_id, formData));\n      dispatch(updateOut(_id, formData));\n      dispatch(upReset(post));\n      setFormData({\n        reset: true\n      });\n      setTimeout(() => {\n        setSubCar(false);\n      }, 100);\n    } else {\n      if (list === \"cars\") {\n        dispatch(createCar(formData));\n        setFormData({\n          reset: true\n        });\n        setTimeout(() => {\n          setSubCar(false);\n        }, 200);\n      } else {\n        api.createCar(formData);\n        setFormData({\n          reset: true\n        });\n        setTimeout(() => {\n          setSubCar(false);\n        }, 200);\n      }\n    }\n  };\n\n  const handleChange = event => {\n    const jsont = JSON.stringify(null);\n    localStorage.setItem(\"scan\", jsont);\n    setFormData({\n      name: event.target.name,\n      value: event.target.type === 'checkbox' ? event.target.checked : event.target.value\n    });\n  };\n\n  const handleModal = e => {\n    setModalId(e.target.name);\n    setModal(true);\n  };\n\n  const handleSubCar = () => {\n    handleClick();\n    setFormData({\n      reset: true\n    });\n    setTimeout(() => {\n      setSubCar(false);\n    }, 200);\n  };\n\n  const handleScan = () => {\n    setScan(true);\n    setSubCar(false);\n  };\n\n  const jsont = JSON.stringify(formData);\n  localStorage.setItem(\"formdata\", jsont);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"backshadow2\",\n    onClick: handleSubCar,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"custom-modal2\",\n      onClick: e => e.stopPropagation(),\n      children: [modal === true && /*#__PURE__*/_jsxDEV(Modal, {\n        setModal: setModal,\n        ...{\n          vehicle,\n          setVehicle,\n          modalid,\n          formData,\n          setFormData,\n          setModal\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"h1div\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Submit Car:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 10\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"clearbtn\",\n          onClick: handleScan,\n          children: \"Scanner\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 192,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        children: /*#__PURE__*/_jsxDEV(\"fieldset\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"btndiv\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"clearbtn\",\n              type: \"button\",\n              onClick: resetForm,\n              children: \"Clear\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 201,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"clearbtn\",\n              type: \"button\",\n              onClick: handleType,\n              children: formData.type || ''\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 202,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"clearbtn\",\n              type: \"submit\",\n              onClick: handleSubmit,\n              children: \"Submit\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 203,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"inprow\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Ticket #:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                name: \"ticket\",\n                onChange: handleChange,\n                value: formData.ticket || ''\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 209,\n                columnNumber: 13\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 207,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Price:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"but\",\n                type: \"button\",\n                name: \"price\",\n                value: formData.price || '',\n                onClick: handleModal,\n                children: [\"\\xA0\\xA0\\xA0\\xA0\\xA0 \\xA0\", formData.price || 'Choose price', \"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 213,\n                columnNumber: 13\n              }, this), \"\\xA0\\xA0\\xA0\\xA0\\xA0\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 10\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"inprow\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Name:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 219,\n                columnNumber: 14\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                name: \"name\",\n                onChange: handleChange,\n                value: formData.name || ''\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 14\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"VIP:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 223,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                checked: formData.vip || \"\",\n                name: \"vip\",\n                onChange: handleChange,\n                type: \"checkbox\",\n                value: \"VIP\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 224,\n                columnNumber: 13\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"inprow\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Room:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 14\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                name: \"room\",\n                onChange: handleChange,\n                value: formData.room || ''\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 236,\n                columnNumber: 14\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Out front:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 239,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                checked: formData.outfront || \"\",\n                name: \"outfront\",\n                onChange: handleChange,\n                type: \"checkbox\",\n                value: \"outfront\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 240,\n                columnNumber: 13\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"inprow\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Departure:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 14\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"date\",\n                name: \"depart\",\n                onChange: handleChange,\n                value: formData.depart || ''\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 14\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Retrieve at:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 14\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                name: \"retrieve\",\n                onChange: handleChange,\n                value: formData.retrieve || ''\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 14\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"inprow\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Vehicle make:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 14\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"but\",\n                type: \"button\",\n                name: \"vmake\",\n                value: formData.vmake || '',\n                onClick: handleModal,\n                children: formData.vmake || 'Choose make'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 263,\n                columnNumber: 14\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Notes:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 14\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"textfield\",\n                name: \"notes\",\n                onChange: handleChange,\n                value: formData.notes || ''\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 268,\n                columnNumber: 14\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"inprow\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Vehicle color:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 273,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"but\",\n                type: \"button\",\n                name: \"vcolor\",\n                value: formData.vcolor || '',\n                onClick: handleModal,\n                children: formData.vcolor || 'Choose color'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 13\n              }, this), \"\\xA0\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 272,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Parking spot:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 278,\n                columnNumber: 13\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                name: \"pspot\",\n                onChange: handleChange,\n                value: formData.pspot || ''\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 13\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"inprow\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"Vehicle model:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 284,\n                columnNumber: 14\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                name: \"vmodel\",\n                onChange: handleChange,\n                value: formData.vmodel || ''\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 14\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"License plate #:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 288,\n                columnNumber: 14\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                name: \"license\",\n                onChange: handleChange,\n                value: formData.license || ''\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 14\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 187,\n    columnNumber: 5\n  }, this);\n}\n\n_s(SubCar, \"a7Dgb7+jAmojeD/STBZqLV4gQjM=\", false, function () {\n  return [useSelector, useDispatch, useNavigate];\n});\n\n_c = SubCar;\nexport default SubCar;\n\nvar _c;\n\n$RefreshReg$(_c, \"SubCar\");","map":{"version":3,"sources":["C:/Users/Chris/Documents/GitHub/ValetProUser/Client/src/components/SubCar/SubCar.js"],"names":["React","useReducer","useState","useEffect","DatePicker","createCar","updateCar","updatePull","updateComp","updateOut","useNavigate","useDispatch","useSelector","upReset","Modal","api","_","formReducer","state","event","reset","price","type","vcolor","name","value","SubCar","vehicle","setVehicle","scan","setScan","list","tableData","setTableData","posts","x","setSubCar","formT","setFormT","post","updateForm","pos","Object","values","modal","setModal","modalid","setModalId","jso","JSON","stringify","localStorage","setItem","json","getItem","savedNotes","parse","json2","scan1","dispatch","length","formData","setFormData","_id","navigate","vmake","vstring1","replaceAll","console","log","vip","outfront","handleType","handleClick","form","o","fromEntries","entries","filter","v","formt","isEqual","resetForm","jsont","handleSubmit","preventDefault","setTimeout","handleChange","target","checked","handleModal","e","handleSubCar","handleScan","stopPropagation","ticket","room","depart","retrieve","notes","pspot","vmodel","license"],"mappings":"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","sourcesContent":["import React, { useReducer, useState, useEffect } from 'react';\r\nimport DatePicker from 'react-date-picker';\r\nimport './SubCar.css';\r\nimport {  createCar, updateCar } from '../../_actions/subCars';\r\nimport { updatePull } from '../../_actions/pulls';\r\nimport { updateComp } from '../../_actions/completed';\r\nimport { updateOut } from '../../_actions/outnr';\r\nimport { useNavigate } from 'react-router';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { upReset } from '../../_actions/updateForm';\r\nimport Modal from './Modal';\r\nimport * as api from '../../_api';\r\n\r\nimport _ from 'lodash'\r\n\r\nconst formReducer = (state, event) => {\r\n\r\n   if(event.reset) {     \r\n  return{price: \"$44\", type: \"ON\"}\r\n    }else if(state.vcolor){\r\n      return{\r\n        ...state,\r\n        [event.name]: event.value\r\n      }\r\n    }\r\n  return {\r\n      ...state,\r\n    [event.name]: event.value\r\n  }\r\n  \r\n}\r\nfunction SubCar({vehicle, setVehicle, scan, setScan, list, tableData, setTableData, posts, x, setSubCar, formT, setFormT}) {\r\n\r\n  const post = useSelector( state => state.updateForm )\r\n  const pos = Object.values(post)\r\n  const [modal, setModal] = useState(false);\r\n  const [modalid, setModalId] = useState(\"\")\r\n\r\n  useEffect (() => {\r\n    const jso = JSON.stringify(post);\r\n      localStorage.setItem(\"upform\", jso);\r\n    })\r\n\r\n   const json = localStorage.getItem(\"formdata\");\r\n  const savedNotes = JSON.parse(json);\r\n\r\n  const json2 = localStorage.getItem(\"scan\");\r\n  const scan1 = JSON.parse(json2);\r\n  \r\n    \r\n  const dispatch = useDispatch() \r\n\r\n  const length = pos.length\r\n\r\n  const [formData, setFormData] = useReducer(formReducer,  \r\n  scan1 ? scan1 : length!==0 && post._id!==1 ? post : savedNotes ? savedNotes : {price:\"$44\", type: \"ON\"});\r\n    \r\n  let navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const json = JSON.stringify(vehicle.vcolor+\" \"+vehicle.vmake)\r\n    const vstring1 = json.replaceAll(\"[/']\",\"\");\r\n    formData.vehicle=vstring1\r\n    console.log(vstring1)\r\n    },[formData, vehicle.vcolor, vehicle.vmake]) \r\n  \r\n\r\n  useEffect(()=>{\r\n    if(formData.vip){\r\n      formData.vip=\"VIP\";\r\n    }else if(!formData.vip){\r\n      formData.vip=\"\"; }\r\n  })\r\n  useEffect(()=>{\r\n    if(formData.outfront){\r\n      formData.outfront=\"outfront\";\r\n    }else if(!formData.outfront){\r\n      formData.outfront=\"\"; }\r\n  })\r\n\r\n  const handleType = () => {\r\n    if(formData.type===\"ON\"){\r\n    formData.price=\"$20\"\r\n    formData.type=\"DAY\"\r\n    setFormData(formData)\r\n    }else if(formData.type===\"DAY\"){\r\n      formData.price=\"$44\"\r\n      formData.type=\"ON\"\r\n      setFormData(formData)\r\n\r\n    }\r\n }\r\n\r\n const handleClick = () => {\r\n\r\n\r\n     const form = {price:\"$44\", type: \"ON\"};\r\nlet o = Object.fromEntries(Object.entries(formData).filter(([_, v]) => v !== \"\"));\r\n const formt = _.isEqual(o, form);\r\n    if (formData._id===post._id)  {  \r\n     setFormData({reset: true})\r\n     setFormT(false);\r\n     dispatch(upReset(post));\r\n      console.log(formT);\r\n   }else if (formt){\r\n     setFormT(false);\r\n\r\n     console.log(formT);\r\n   }else{\r\n   setFormT(true);   \r\n\r\n   console.log(formT);};\r\n   console.log(post);\r\n\r\n\r\n }\r\n\r\n    const resetForm = () => {\r\n      const jsont = JSON.stringify(null);\r\n        localStorage.setItem(\"scan\", jsont);\r\n       setFormData({reset: true})\r\n  \r\n    }\r\n  \r\n  const handleSubmit = (event ) => {\r\n    event.preventDefault();\r\n      if (formData._id === post._id){\r\n      const _id = formData._id\r\n      dispatch(updateCar(_id, formData))\r\n      dispatch(updatePull(_id, formData))\r\n      dispatch(updateComp(_id, formData))\r\n      dispatch(updateOut(_id, formData))\r\n      dispatch(upReset(post))\r\n      setFormData({reset: true})\r\n      setTimeout(() => {\r\n      setSubCar(false) \r\n      }, 100)\r\n      }else{\r\n        if(list===\"cars\"){\r\n      dispatch(createCar(formData))\r\n      setFormData({reset: true}) \r\n      setTimeout(() => {\r\n        setSubCar(false)\r\n      }, 200);\r\n    }\r\n      else{\r\n        api.createCar(formData)\r\n        setFormData({reset: true}) \r\n        setTimeout(() => {\r\n          setSubCar(false)\r\n        }, 200);\r\n       \r\n        }  \r\n      }}\r\n    \r\n      const handleChange = event => {\r\n        const jsont = JSON.stringify(null);\r\n        localStorage.setItem(\"scan\", jsont);\r\n        setFormData({\r\n          name: event.target.name,\r\n          value: event.target.type === 'checkbox' ? event.target.checked : event.target.value\r\n        });\r\n        };\r\n\r\n        const handleModal = (e) => {\r\n          setModalId(e.target.name)\r\n          setModal(true);\r\n          }\r\n          const handleSubCar = () =>{\r\n            handleClick()\r\n            setFormData({reset:true})\r\n            setTimeout(() => {\r\n              setSubCar(false)\r\n            }, 200);\r\n            \r\n          }\r\n          const handleScan = () => {\r\n            setScan(true)\r\n            setSubCar(false)\r\n          }\r\n\r\n          \r\n        const jsont = JSON.stringify(formData);\r\n        localStorage.setItem(\"formdata\", jsont);\r\n\r\n   return (\r\n    <div className='backshadow2' onClick={handleSubCar}>\r\n            <div className='custom-modal2'onClick={(e) => e.stopPropagation()}>\r\n\r\n      {modal===true&&(\r\n        <Modal setModal={setModal}  {...{vehicle, setVehicle, modalid, formData, setFormData, setModal}}/>)}\r\n         <div className='h1div'>\r\n         <h1>\r\n        Submit Car:\r\n      </h1>\r\n        <button className='clearbtn' onClick={handleScan}>Scanner</button>\r\n      </div>\r\n      <form >\r\n        <fieldset >\r\n        <div className=\"btndiv\">\r\n            <button className='clearbtn' type=\"button\" onClick={resetForm} >Clear</button>\r\n            <button className='clearbtn' type=\"button\" onClick={handleType} >{formData.type || ''}</button>\r\n            <button className=\"clearbtn\" type=\"submit\" onClick={handleSubmit} >Submit</button>\r\n            \r\n         </div>\r\n         <div className='inprow'>\r\n          <label>\r\n            <p>Ticket #:</p>\r\n            <input name=\"ticket\" onChange={handleChange} value={formData.ticket || ''} />\r\n          </label>\r\n          <label>\r\n            <p>Price:</p>\r\n            <button className='but' type=\"button\" name=\"price\" value={formData.price || ''} onClick={handleModal}>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n            &nbsp;{formData.price || 'Choose price'}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n          </label>\r\n          </div>\r\n          <div className='inprow'>\r\n        <label>\r\n             <p>Name:</p>\r\n             <input name=\"name\" onChange={handleChange} value={formData.name || ''} />\r\n          </label>\r\n          <label>\r\n            <p>VIP:</p>\r\n            <input\r\n              checked={formData.vip || \"\"}\r\n              name=\"vip\"\r\n              onChange={handleChange}\r\n              type=\"checkbox\"\r\n              value=\"VIP\"\r\n            />\r\n          </label>\r\n          </div>\r\n          <div className='inprow'>\r\n        <label>\r\n             <p>Room:</p>\r\n             <input name=\"room\" onChange={handleChange} value={formData.room || ''} />\r\n          </label>\r\n          <label>\r\n            <p>Out front:</p>\r\n            <input\r\n              checked={formData.outfront || \"\"}\r\n              name=\"outfront\"\r\n              onChange={handleChange}\r\n              type=\"checkbox\"\r\n              value=\"outfront\"\r\n            />\r\n          </label>\r\n          </div>\r\n          <div className='inprow'>\r\n        <label>\r\n             <p>Departure:</p>\r\n             <input type=\"date\"  name=\"depart\" onChange={handleChange} value={formData.depart || ''} />\r\n          </label>\r\n          <label>\r\n             <p>Retrieve at:</p>\r\n             <input  name=\"retrieve\" onChange={handleChange} value={formData.retrieve || ''} />\r\n          </label>\r\n          \r\n          </div>\r\n          <div className='inprow'>\r\n          <label>\r\n             <p>Vehicle make:</p>\r\n             <button className='but' type=\"button\" name=\"vmake\" value={formData.vmake || ''} onClick={handleModal}>\r\n            {formData.vmake || 'Choose make'}</button>\r\n          </label>\r\n          <label>\r\n             <p>Notes:</p>\r\n             <input type=\"textfield\" name=\"notes\" onChange={handleChange} value={formData.notes || ''} />\r\n          </label>\r\n          </div>\r\n          <div className='inprow'>\r\n          <label>\r\n            <p>Vehicle color:</p>\r\n            <button className='but' type=\"button\" name=\"vcolor\" value={formData.vcolor || ''} onClick={handleModal}>\r\n            {formData.vcolor || 'Choose color'}</button>&nbsp;\r\n            </label>\r\n            <label>\r\n            <p>Parking spot:</p>\r\n            <input name=\"pspot\" onChange={handleChange} value={formData.pspot || ''} />\r\n          </label>\r\n          </div>\r\n          <div className='inprow'>\r\n          <label>\r\n             <p>Vehicle model:</p>\r\n             <input name=\"vmodel\" onChange={handleChange} value={formData.vmodel || ''} />\r\n          </label>\r\n          <label>\r\n             <p>License plate #:</p>\r\n             <input name=\"license\" onChange={handleChange} value={formData.license || ''} />\r\n          </label>\r\n          </div>\r\n        </fieldset>\r\n      </form>\r\n    </div>\r\n    </div>\r\n    \r\n    \r\n  )\r\n}\r\n\r\nexport default SubCar;"]},"metadata":{},"sourceType":"module"}