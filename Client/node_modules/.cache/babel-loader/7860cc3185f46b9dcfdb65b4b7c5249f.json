{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"C:/Users/Chris/Documents/GitHub/ValetProUser/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"C:/Users/Chris/Documents/GitHub/ValetProUser/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/Chris/Documents/GitHub/ValetProUser/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{useEffect,useReducer}from\"react\";import{batch,useDispatch,useSelector}from\"react-redux\";import{deleteCar}from\"../../_actions/subCars\";import{createPull}from\"../../_actions/pulls\";import Pay from\"../List/Pay\";import{upReset}from\"../../_actions/updateForm\";import{updateCar}from\"../../_actions/subCars\";import{updatePull}from\"../../_actions/pulls\";var formReducer=function formReducer(state,event){if(event.reset){return{};}return _objectSpread(_objectSpread({},state),{},_defineProperty({},event.name,event.value));};var CarsM=function CarsM(_ref){var setPullId=_ref.setPullId,pullId=_ref.pullId,setModal=_ref.setModal,tableData=_ref.tableData;var post=useSelector(function(state){return state.updateForm;});var pos=Object.values(post);useEffect(function(){var jso=JSON.stringify(post);localStorage.setItem(\"upform2\",jso);});var json=localStorage.getItem(\"pay\");var savedNotes=JSON.parse(json);var dispatch=useDispatch();var length=pos.length;var _useReducer=useReducer(formReducer,length!==0&&post._id!==1?post:savedNotes?savedNotes:{room:880,type:\"on\"}),_useReducer2=_slicedToArray(_useReducer,2),formData=_useReducer2[0],setFormData=_useReducer2[1];var handleSubmit=function handleSubmit(e){e.preventDefault();if(formData.price&&formData.vcolor){var _id=formData._id;dispatch(updateCar(_id,formData));dispatch(updatePull(_id,formData));dispatch(upReset(post));setFormData({reset:true});setModal(false);}};/* useEffect(() => {\r\n              if (formData.price !== post.price && formData.vcolor){\r\n              const _id = formData._id\r\n              dispatch(updateCar(_id, formData))\r\n              dispatch(updatePull(_id, formData))\r\n              dispatch(upReset(post))\r\n              setFormData({reset: true}) \r\n              setModal(false)   \r\n              }     \r\n\r\n            }) */useEffect(function(){if(formData.checkout!==post.checkout){var _id=formData._id;dispatch(updateCar(_id,formData));dispatch(upReset(post));setFormData({reset:true});setModal(false);}});var handleChange=function handleChange(event){setFormData({name:event.target.name,value:event.target.type==='checkbox'?event.target.checked:event.target.value});};var handlePull=function handlePull(){var evt=pullId;tableData.filter(function(data){if(evt===data._id){dispatch(createPull(data));dispatch(deleteCar(data._id));setModal(false);}});};var handleModal=function handleModal(){dispatch(upReset(post));setModal(false);};var jsont=JSON.stringify(formData);localStorage.setItem(\"pay\",jsont);return/*#__PURE__*/_jsx(\"div\",{className:\"backshadow\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"custom-modal\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"delete-icon\",onClick:handleModal,children:\"x\"}),pullId,formData.type===\"on\"&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",name:\"checkout\",value:\"checkout\",onClick:handleChange,children:\"Checking Out\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",name:\"checkout\",value:\"return\",onClick:handleChange,children:\"Returning\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",name:\"pulls\",value:\"Pull\",onClick:handlePull,children:\"Pull\"})]}),formData.type===\"day\"&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Pay,_objectSpread({},{setModal:setModal,tableData:tableData,pullId:pullId})),/*#__PURE__*/_jsx(\"button\",{type:\"button\",name:\"pulls\",value:\"Pull\",onClick:handlePull,children:\"Pull\"})]})]})});};export default CarsM;","map":{"version":3,"sources":["C:/Users/Chris/Documents/GitHub/ValetProUser/Client/src/components/Pages/CarsM.js"],"names":["React","useEffect","useReducer","batch","useDispatch","useSelector","deleteCar","createPull","Pay","upReset","updateCar","updatePull","formReducer","state","event","reset","name","value","CarsM","setPullId","pullId","setModal","tableData","post","updateForm","pos","Object","values","jso","JSON","stringify","localStorage","setItem","json","getItem","savedNotes","parse","dispatch","length","_id","room","type","formData","setFormData","handleSubmit","e","preventDefault","price","vcolor","checkout","handleChange","target","checked","handlePull","evt","filter","data","handleModal","jsont"],"mappings":"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","sourcesContent":["import React, {useEffect, useReducer} from \"react\"\r\nimport { batch, useDispatch, useSelector } from \"react-redux\";\r\nimport { deleteCar } from \"../../_actions/subCars\";\r\nimport { createPull } from \"../../_actions/pulls\";\r\nimport Pay from \"../List/Pay\";\r\nimport { upReset } from \"../../_actions/updateForm\";\r\nimport { updateCar } from \"../../_actions/subCars\";\r\nimport { updatePull } from \"../../_actions/pulls\";\r\n\r\nconst formReducer = (state, event) => {\r\n\r\n    if(event.reset) {\r\n      return {\r\n      \r\n     }\r\n  }\r\n   return {\r\n       ...state,\r\n     [event.name]: event.value\r\n   }}\r\n\r\nconst CarsM = ({setPullId, pullId, setModal, tableData}) => {\r\n\r\n    const post = useSelector( state => state.updateForm )\r\n    const pos = Object.values(post)\r\n\r\n   useEffect (() => {\r\n    const jso = JSON.stringify(post);\r\n      localStorage.setItem(\"upform2\", jso);\r\n    })\r\n  \r\n      const json = localStorage.getItem(\"pay\");\r\n  const savedNotes = JSON.parse(json);\r\n      \r\n  const dispatch = useDispatch() \r\n\r\n  const length = pos.length\r\n\r\n  const [formData, setFormData] = useReducer(formReducer,  \r\n  length!==0 && post._id!==1 ? post : savedNotes ? savedNotes : {room: 880, type: \"on\"});   \r\n\r\n\r\n      const handleSubmit = (e) => {\r\n          e.preventDefault();\r\n        if (formData.price && formData.vcolor){\r\n          const _id = formData._id\r\n          dispatch(updateCar(_id, formData))\r\n          dispatch(updatePull(_id, formData))\r\n          dispatch(upReset(post))\r\n          setFormData({reset: true}) \r\n          setModal(false)  \r\n           \r\n          } \r\n      \r\n      }\r\n\r\n          /* useEffect(() => {\r\n              if (formData.price !== post.price && formData.vcolor){\r\n              const _id = formData._id\r\n              dispatch(updateCar(_id, formData))\r\n              dispatch(updatePull(_id, formData))\r\n              dispatch(upReset(post))\r\n              setFormData({reset: true}) \r\n              setModal(false)   \r\n              }     \r\n\r\n            }) */\r\n            \r\n         useEffect(() => {\r\n          if(formData.checkout !== post.checkout ){\r\n            const _id = formData._id\r\n            dispatch(updateCar(_id, formData))\r\n            dispatch(upReset(post))\r\n              setFormData({reset: true}) \r\n            setModal(false)\r\n            \r\n             }\r\n         })\r\n\r\n    const handleChange = (event) => {\r\n      setFormData({\r\n        name: event.target.name,\r\n        value: event.target.type === 'checkbox' ? event.target.checked : event.target.value\r\n      });\r\n    }\r\n           \r\n            \r\n\r\n    const handlePull = () => {\r\n        const evt = pullId\r\n        tableData.filter((data) => {\r\n        if (evt === data._id) {\r\n        dispatch(createPull(data))\r\n        dispatch(deleteCar(data._id))\r\n        setModal(false)\r\n        }\r\n      })}\r\n       \r\n\r\n       \r\n        const handleModal = () => {\r\n            dispatch(upReset(post))\r\n            setModal(false)\r\n        }\r\n\r\n        const jsont = JSON.stringify(formData);\r\n        localStorage.setItem(\"pay\", jsont);\r\n    \r\n        \r\n    return (\r\n        <div className='backshadow'>\r\n            <div className='custom-modal'>\r\n                <div className=\"delete-icon\"\r\n                onClick={handleModal}>x</div>\r\n\r\n                   {pullId}\r\n\r\n                   {formData.type===\"on\"&&(\r\n                   <div>\r\n                <button type=\"button\" name=\"checkout\" value=\"checkout\" onClick={handleChange}>Checking Out</button>\r\n                <button type=\"button\" name=\"checkout\" value=\"return\" onClick={handleChange}>Returning</button>\r\n                <button type=\"button\"  name=\"pulls\" value=\"Pull\" onClick={handlePull}>Pull</button>\r\n                </div>)}\r\n                  {formData.type===\"day\"&&(\r\n                <div>\r\n                 { <Pay {...{setModal, tableData, pullId}}/> } \r\n                 <button type=\"button\"  name=\"pulls\" value=\"Pull\" onClick={handlePull}>Pull</button>\r\n                </div>)}\r\n                </div>  \r\n                \r\n        </div>\r\n    )\r\n}\r\n\r\nexport default CarsM;"]},"metadata":{},"sourceType":"module"}