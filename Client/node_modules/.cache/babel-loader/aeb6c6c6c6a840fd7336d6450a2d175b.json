{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _toConsumableArray from\"C:/Users/Chris/Documents/GitHub/ValetProUser/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"C:/Users/Chris/Documents/GitHub/ValetProUser/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import{batch,useDispatch,useSelector}from\"react-redux\";import{deleteCar,createCar,updateCar}from\"../../_actions/subCars\";import{createPull,deletePull,updatePull}from\"../../_actions/pulls\";import{upForm}from\"../../_actions/updateForm\";import{useNavigate}from\"react-router-dom\";import Button from\"./Button\";import{upReset}from\"../../_actions/updateForm\";import{createOut,deleteOut}from\"../../_actions/outnr\";import{createComp,deleteComp}from\"../../_actions/completed\";import*as api from'../../_api';var TableBody=function TableBody(_ref){var windowSize=_ref.windowSize,setFormT=_ref.setFormT,formT=_ref.formT,scan=_ref.scan,setScan=_ref.setScan,sorted=_ref.sorted,setSubCar=_ref.setSubCar,list=_ref.list,carlength=_ref.carlength,on=_ref.on,day=_ref.day,posts=_ref.posts,setTableData=_ref.setTableData,tableData=_ref.tableData,columns=_ref.columns,columnMobile=_ref.columnMobile,setPullId=_ref.setPullId,setModal=_ref.setModal,vehicle=_ref.vehicle,setVehicle=_ref.setVehicle;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),searchTerm=_useState2[0],setSearchTerm=_useState2[1];var dispatch=useDispatch();useEffect(function(){tableData.filter(function(data){if(data.type===\"ON\"&&!data.room&&!data.hot){data.hot=\"Hot\";dispatch(updateCar(data._id,data));dispatch(updatePull(data._id,data));}else if(data.type===\"ON\"&&data.room&&data.hot){data.hot=\"\";dispatch(updateCar(data._id,data));dispatch(updatePull(data._id,data));}});});useEffect(function(){tableData.filter(function(data){if(list===\"cars\"&&!data.complete&&data.payment&&data.price){data.complete=\"Complete\";data.status=\"Paid\";api.createPull(data);dispatch(deleteCar(data._id));}else if(list===\"pulls\"&&!data.complete&&data.payment&&data.price){data.complete=\"Paid\";data.status=\"Paid\";var _id=data._id;dispatch(updatePull(_id,data));}});});var handleUpdate=function handleUpdate(e){var evt=e.target.value;tableData.filter(function(data){if(evt===data._id){dispatch(upForm(data));setSubCar(true);}});};var handleComp=function handleComp(e){var evt=e.target.value;tableData.filter(function(data){if(evt===data._id&&data.status===\"Returning\"){data.complete=\"Completed\";dispatch(deletePull(data._id));api.createOut(data);}else if(evt===data._id&&data.status!==\"Returning\"){data.complete=\"Completed\";dispatch(deletePull(data._id));api.createComp(data);}});};var handleRepark=function handleRepark(e){var evt=e.target.value;tableData.filter(function(data){if(evt===data._id){data.payment=\"\";data.complete=\"\";data.status=\"repark\";api.createCar(data);setTableData(_toConsumableArray(sorted));dispatch(deletePull(data._id));dispatch(deleteComp(data._id));dispatch(deleteOut(data._id));}});};var handleModal=function handleModal(e){setModal(true);setPullId(e.target.value);var evt=e.target.value;tableData.filter(function(data){if(evt===data._id){dispatch(upForm(data));}});};var handleOuts=function handleOuts(e){var evt=e.target.value;tableData.filter(function(data){if(evt===data._id){data.status=\"Checking Out\";api.createComp(data);dispatch(deleteOut(data._id));}});};/* mass delete if needed  \r\n            useEffect(()=>{\r\n            tableData.map((data) => {\r\n            dispatch(deletePull(data._id))  \r\n            dispatch(deleteCar(data._id))\r\n            dispatch(deleteComp(data._id)) \r\n            dispatch(deleteOut(data._id))\r\n          })})*/return/*#__PURE__*/_jsxs(\"tbody\",{className:\"datacontainer\",children:[/*#__PURE__*/_jsxs(\"tr\",{className:\"searchtr\",children:[/*#__PURE__*/_jsxs(\"td\",{className:\"tablenav\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"search...\",onChange:function onChange(event){setSearchTerm(event.target.value);},value:searchTerm}),/*#__PURE__*/_jsx(\"button\",{className:\"but searchbtn\",onClick:function onClick(){return setSearchTerm(\"\");},children:\"X\"})]}),/*#__PURE__*/_jsxs(\"td\",{children:[carlength,\"\\xA0total\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"tablenav\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"butscanadd\",onClick:function onClick(){return setScan(true);},children:\"Scan\"}),/*#__PURE__*/_jsx(\"button\",{className:formT?\"but btn-flash\":\"butscanadd\",onClick:function onClick(){return setSubCar(true);},children:\"Add\"})]})]}),tableData.filter(function(data){if(!on&&!day){return data;}else if(!on){var _data$type;return(_data$type=data.type)===null||_data$type===void 0?void 0:_data$type.includes(\"ON\");}else if(!day){var _data$type2;return(_data$type2=data.type)===null||_data$type2===void 0?void 0:_data$type2.includes(\"DAY\");}}).filter(function(data){var _data$ticket,_data$name,_data$room,_data$vmake,_data$vmake2,_data$vcolor,_data$vmodel,_data$vehicle;if(searchTerm===\"\"){return data;}else if((_data$ticket=data.ticket)===null||_data$ticket===void 0?void 0:_data$ticket.toLowerCase().includes(searchTerm.toLowerCase())){return data;}else if((_data$name=data.name)===null||_data$name===void 0?void 0:_data$name.toLowerCase().includes(searchTerm.toLowerCase())){return data;}else if((_data$room=data.room)===null||_data$room===void 0?void 0:_data$room.toLowerCase().includes(searchTerm.toLowerCase())){return data;}else if((_data$vmake=data.vmake)===null||_data$vmake===void 0?void 0:_data$vmake.toLowerCase().includes(searchTerm.toLowerCase())){return data;}else if((_data$vmake2=data.vmake)===null||_data$vmake2===void 0?void 0:_data$vmake2.toLowerCase().includes(searchTerm.toLowerCase())){return data;}else if((_data$vcolor=data.vcolor)===null||_data$vcolor===void 0?void 0:_data$vcolor.toLowerCase().includes(searchTerm.toLowerCase())){return data;}else if((_data$vmodel=data.vmodel)===null||_data$vmodel===void 0?void 0:_data$vmodel.toLowerCase().includes(searchTerm.toLowerCase())){return data;}else if((_data$vehicle=data.vehicle)===null||_data$vehicle===void 0?void 0:_data$vehicle.toLowerCase().includes(searchTerm.toLowerCase())){return data;}}).map(function(data){return/*#__PURE__*/_jsxs(\"tr\",{className:\"bodytr\",children:[windowSize.innerWidth>\"1000\"&&/*#__PURE__*/_jsxs(\"td\",{className:\"listbtn\",children:[!data.complete&&/*#__PURE__*/_jsx(\"button\",{className:\"but procbtn\",value:data._id,onClick:handleModal,children:\"Process...\\xA0\\xA0\\xA0\"}),list===\"pulls\"&&data.complete&&!data.hot&&/*#__PURE__*/_jsx(\"button\",{className:\"but\",value:data._id,onClick:handleComp,children:\"Completed\"}),list===\"pulls\"&&data.complete&&data.hot&&/*#__PURE__*/_jsx(\"button\",{className:\"but roombtn\",value:data._id,onClick:handleModal,children:\"\\xA0+ Room\\xA0\\xA0\\xA0\\xA0\"}),list===\"outs\"&&/*#__PURE__*/_jsx(\"button\",{className:\"but\",value:data._id,onClick:handleOuts,children:\"Checkout\"}),/*#__PURE__*/_jsx(\"button\",{className:\"but editbtn\",type:\"button\",value:data._id,onClick:handleUpdate,children:\"Edit\"}),data.complete&&/*#__PURE__*/_jsx(\"button\",{className:\"but parkbtn\",value:data._id,onClick:handleRepark,children:\"Repark\"}),data.status===\"process\"&&/*#__PURE__*/_jsx(\"button\",{className:\"but parkbtn\",value:data._id,onClick:handleRepark,children:\"Repark\"})]}),columns.map(function(_ref2){var accessor=_ref2.accessor;if(windowSize.innerWidth>\"1000\"){var tData=data[accessor]?data[accessor]:\"\";return/*#__PURE__*/_jsx(\"td\",{className:data.hot?\"hotlist\":data.complete?\"complist\":data.type===\"DAY\"?\"daylist\":\"deflist\",children:tData},accessor);}}),windowSize.innerWidth<\"1000\"&&/*#__PURE__*/_jsxs(\"td\",{className:data.hot?\"listmobile hotlist\":data.complete?\"listmobile complist\":data.type===\"DAY\"?\"listmobile daylist\":\"listmobile deflist\",children:[/*#__PURE__*/_jsxs(\"td\",{className:\"listmobile2\",children:[data.ticket,\"\\xA0\\xA0 \",data.type,\" \\xA0\\xA0\",data.depart,\"\\xA0\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"listmobile2\",children:[data.name,\" \\xA0\\xA0\",data.room,\" \\xA0\\xA0\",data.vehicle,\" \\xA0\\xA0\",data.vmodel,\"\\xA0\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"listmobile2\",children:[data.price,\" \\xA0\\xA0\",data.payment,\" \\xA0\\xA0\",data.status,\" \\xA0\\xA0\",data.complete,\"\\xA0\"]}),/*#__PURE__*/_jsxs(\"td\",{className:\"listmobile2\",children:[data.notes,\" \\xA0\\xA0\",data.hot,\" \\xA0\\xA0\",data.vip,\" \\xA0\\xA0\",data.outfront,\" \\xA0\\xA0\",data.pspot,\" \\xA0\\xA0\",data.license,\"\\xA0\"]})]},data._id),windowSize.innerWidth<\"1000\"&&/*#__PURE__*/_jsxs(\"td\",{className:\"listbtn\",children:[!data.complete&&/*#__PURE__*/_jsx(\"button\",{className:\"but procbtn\",value:data._id,onClick:handleModal,children:\"Process...\\xA0\\xA0\\xA0\"}),list===\"pulls\"&&data.complete&&!data.hot&&/*#__PURE__*/_jsx(\"button\",{className:\"but\",value:data._id,onClick:handleComp,children:\"Completed\"}),list===\"pulls\"&&data.complete&&data.hot&&/*#__PURE__*/_jsx(\"button\",{className:\"but roombtn\",value:data._id,onClick:handleModal,children:\"\\xA0+ Room\\xA0\\xA0\\xA0\\xA0\"}),list===\"outs\"&&/*#__PURE__*/_jsx(\"button\",{className:\"but\",value:data._id,onClick:handleOuts,children:\"Checkout\"}),/*#__PURE__*/_jsx(\"button\",{className:\"but editbtn\",type:\"button\",value:data._id,onClick:handleUpdate,children:\"Edit\"}),data.complete&&/*#__PURE__*/_jsx(\"button\",{className:\"but parkbtn\",value:data._id,onClick:handleRepark,children:\"Repark\"}),data.status===\"process\"&&/*#__PURE__*/_jsx(\"button\",{className:\"but parkbtn\",value:data._id,onClick:handleRepark,children:\"Repark\"})]})]},data._id);})]});};export default TableBody;","map":{"version":3,"sources":["C:/Users/Chris/Documents/GitHub/ValetProUser/Client/src/components/List/Body.js"],"names":["React","useEffect","useState","batch","useDispatch","useSelector","deleteCar","createCar","updateCar","createPull","deletePull","updatePull","upForm","useNavigate","Button","upReset","createOut","deleteOut","createComp","deleteComp","api","TableBody","windowSize","setFormT","formT","scan","setScan","sorted","setSubCar","list","carlength","on","day","posts","setTableData","tableData","columns","columnMobile","setPullId","setModal","vehicle","setVehicle","searchTerm","setSearchTerm","dispatch","filter","data","type","room","hot","_id","complete","payment","price","status","handleUpdate","e","evt","target","value","handleComp","handleRepark","handleModal","handleOuts","event","includes","ticket","toLowerCase","name","vmake","vcolor","vmodel","map","innerWidth","accessor","tData","depart","notes","vip","outfront","pspot","license"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from \"react\"\r\nimport { batch, useDispatch, useSelector } from \"react-redux\";\r\nimport { deleteCar, createCar, updateCar } from \"../../_actions/subCars\";\r\nimport { createPull, deletePull, updatePull } from \"../../_actions/pulls\";\r\nimport { upForm } from \"../../_actions/updateForm\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport Button from \"./Button\";\r\nimport { upReset } from \"../../_actions/updateForm\";\r\nimport { createOut, deleteOut } from \"../../_actions/outnr\";\r\nimport { createComp, deleteComp } from \"../../_actions/completed\";\r\nimport * as api from '../../_api';\r\n\r\nconst TableBody = ({windowSize, setFormT, formT, scan, setScan, sorted, setSubCar, list, carlength, on,\r\n   day, posts, setTableData, tableData, columns, columnMobile, setPullId, setModal, vehicle, setVehicle }) => {\r\n\r\n    const [searchTerm, setSearchTerm] = useState(\"\");\r\n    const dispatch = useDispatch();\r\n\r\n     \r\n  \r\n    useEffect(() => {\r\n      tableData.filter((data) => {\r\n        if (data.type===\"ON\" && !data.room && !data.hot) {\r\n          data.hot=\"Hot\"\r\n          dispatch(updateCar(data._id, data))\r\n          dispatch(updatePull(data._id, data))\r\n        }      \r\n        else if(data.type===\"ON\" && data.room && data.hot) {\r\n          data.hot=\"\"\r\n          dispatch(updateCar(data._id, data))\r\n          dispatch(updatePull(data._id, data))\r\n        } \r\n      })\r\n    }) \r\n\r\n    useEffect(() => {\r\n      tableData.filter((data) => {\r\n        if (list===\"cars\" && !data.complete && data.payment && data.price  ) {  \r\n        data.complete=\"Complete\"\r\n        data.status=\"Paid\"\r\n        api.createPull(data)\r\n        dispatch(deleteCar(data._id))\r\n        } else if (list===\"pulls\" && !data.complete && data.payment && data.price  ) {  \r\n          data.complete=\"Paid\"\r\n          data.status=\"Paid\"\r\n          const _id = data._id\r\n       dispatch(updatePull(_id, data))\r\n          }\r\n      })\r\n    })\r\n\r\n    const handleUpdate = (e) => {\r\n      const evt = e.target.value\r\n      tableData.filter((data) => {\r\n        if (evt === data._id) {\r\n       dispatch(upForm(data));\r\n       setSubCar(true);\r\n      }\r\n      })}\r\n\r\n    const handleComp = (e) => {\r\n      const evt = e.target.value\r\n        tableData.filter((data) => {\r\n\r\n        if(evt===data._id && data.status===\"Returning\"){ \r\n          data.complete=\"Completed\"\r\n          dispatch(deletePull(data._id))      \r\n          api.createOut(data)\r\n\r\n          }else if(evt===data._id && data.status!==\"Returning\"){  \r\n           data.complete=\"Completed\"\r\n          dispatch(deletePull(data._id))        \r\n          api.createComp(data) \r\n          \r\n          }\r\n      })}\r\n      const handleRepark = (e) => {\r\n        const evt = e.target.value\r\n          tableData.filter((data) => {\r\n  \r\n          if(evt===data._id){ \r\n            data.payment=\"\"\r\n            data.complete=\"\"\r\n            data.status=\"repark\"\r\n            api.createCar(data)\r\n            setTableData([...sorted])\r\n\r\n            dispatch(deletePull(data._id))\r\n            dispatch(deleteComp(data._id))  \r\n            dispatch(deleteOut(data._id))     \r\n            }\r\n        })}\r\n\r\n        const handleModal = (e) => {\r\n          setModal(true);\r\n          setPullId(e.target.value)\r\n          const evt = e.target.value\r\n          tableData.filter((data) => {\r\n            if (evt === data._id) {\r\n            dispatch(upForm(data))}\r\n            \r\n          })}\r\n\r\n          const handleOuts = (e) => {\r\n            const evt = e.target.value\r\n              tableData.filter((data) => {\r\n              if(evt===data._id){ \r\n                data.status=\"Checking Out\"\r\n                api.createComp(data)\r\n                dispatch(deleteOut(data._id)) }    \r\n              })}\r\n\r\n        /* mass delete if needed  \r\n            useEffect(()=>{\r\n            tableData.map((data) => {\r\n            dispatch(deletePull(data._id))  \r\n            dispatch(deleteCar(data._id))\r\n            dispatch(deleteComp(data._id)) \r\n            dispatch(deleteOut(data._id))\r\n          })})*/\r\n\r\n    return (\r\n      <tbody className=\"datacontainer\">\r\n        <tr className=\"searchtr\">\r\n          <td className=\"tablenav\">\r\n          <input type=\"text\" placeholder=\"search...\" onChange={(event) => {\r\n         setSearchTerm(event.target.value);}} value={searchTerm} />\r\n         <button className=\"but searchbtn\" onClick={()=>setSearchTerm(\"\")}>X</button>\r\n         </td>\r\n         <td>\r\n             {carlength}&nbsp;total\r\n            </td>\r\n            <td className=\"tablenav\">\r\n              <button className=\"butscanadd\" onClick={()=>setScan(true)} >Scan</button>\r\n              <button className={formT ? \"but btn-flash\" : \"butscanadd\"} onClick={()=>setSubCar(true)} >Add</button>\r\n            </td>\r\n            </tr>\r\n            {tableData.filter((data) => {\r\n            \r\n          \r\n            if (!on && !day) { return data; }\r\n            else if (!on) { return data.type?.includes(\"ON\"); }\r\n            else if (!day) { return data.type?.includes(\"DAY\"); }\r\n          })\r\n            .filter((data) => {\r\n              if (searchTerm === \"\") {\r\n                return data;\r\n            } else if (data.ticket?.toLowerCase().includes(searchTerm.toLowerCase())) { return data; }\r\n              else if (data.name?.toLowerCase().includes(searchTerm.toLowerCase())) { return data; }\r\n              else if (data.room?.toLowerCase().includes(searchTerm.toLowerCase())) { return data; }\r\n              else if (data.vmake?.toLowerCase().includes(searchTerm.toLowerCase()) )  { return data; }          \r\n              else if (data.vmake?.toLowerCase().includes(searchTerm.toLowerCase())) { return data; }\r\n              else if (data.vcolor?.toLowerCase().includes(searchTerm.toLowerCase())) { return data; }\r\n              else if (data.vmodel?.toLowerCase().includes(searchTerm.toLowerCase())) { return data; }\r\n              else if (data.vehicle?.toLowerCase().includes(searchTerm.toLowerCase())) { return data; }\r\n            })\r\n            .map((data) => {\r\n              return (\r\n                <tr  className=\"bodytr\" key={data._id} >\r\n                  {windowSize.innerWidth > \"1000\" &&(\r\n                  <td className=\"listbtn\">\r\n\r\n                    {!data.complete && (\r\n                      <button className=\"but procbtn\" value={data._id}\r\n                        onClick={handleModal}>Process...&nbsp;&nbsp;&nbsp;</button>)}\r\n\r\n                    {list===\"pulls\" && data.complete && !data.hot &&(\r\n                      <button className=\"but\" value={data._id}\r\n                        onClick={handleComp}>Completed</button>\r\n                    )}\r\n\r\n                    {list===\"pulls\" && data.complete && data.hot &&(\r\n                      <button className=\"but roombtn\" value={data._id}\r\n                        onClick={handleModal}>&nbsp;+ Room&nbsp;&nbsp;&nbsp;&nbsp;</button>\r\n                    )}\r\n\r\n                    {list===\"outs\" && (\r\n                      <button className=\"but\" value={data._id}\r\n                        onClick={handleOuts} >Checkout</button>\r\n                    )}\r\n\r\n                    <button className=\"but editbtn\" type=\"button\"  value={data._id} onClick={handleUpdate}>Edit</button>\r\n                      {data.complete && (\r\n                      <button className=\"but parkbtn\" value={data._id}\r\n                        onClick={handleRepark}>Repark</button>\r\n                    )}\r\n\r\n                    {data.status===\"process\" && (\r\n                      <button className=\"but parkbtn\" value={data._id}\r\n                        onClick={handleRepark}>Repark</button>\r\n                    )}\r\n\r\n                   {/* <button className=\"but parkbtn\" type=\"button\"  value={data._id} onClick={() => dispatch(deletePull(data._id)) && dispatch(deleteCar(data._id))\r\n                      && dispatch(deleteComp(data._id)) && dispatch(deleteOut(data._id))}>\r\n                   Delete</button>*/}\r\n                  </td>)}\r\n                  \r\n                   \r\n                  {columns.map(({ accessor }) => {\r\n                    if(windowSize.innerWidth > \"1000\"){\r\n                    const tData = data[accessor] ? data[accessor] : \"\";                 \r\n                    return <td className={data.hot ? \"hotlist\" : data.complete ? \"complist\" : data.type===\"DAY\" ? \"daylist\" : \"deflist\" }  \r\n                    key={accessor}>{tData}</td>;}}\r\n                    \r\n                  )}\r\n                    {windowSize.innerWidth < \"1000\" &&(\r\n                     <td className={data.hot ? \"listmobile hotlist\" : data.complete ? \"listmobile complist\" : \r\n                     data.type===\"DAY\" ? \"listmobile daylist\" : \"listmobile deflist\" } key={data._id}>\r\n                      <td className=\"listmobile2\" >{data.ticket}&nbsp;&nbsp; {data.type} &nbsp;&nbsp;{data.depart}&nbsp;</td>\r\n                      <td className=\"listmobile2\">{data.name} &nbsp;&nbsp;{data.room} &nbsp;&nbsp;{data.vehicle} &nbsp;&nbsp;{data.vmodel}&nbsp;</td>\r\n                      <td className=\"listmobile2\">{data.price} &nbsp;&nbsp;{data.payment} &nbsp;&nbsp;{data.status} &nbsp;&nbsp;{data.complete}&nbsp;</td>\r\n                      <td className=\"listmobile2\">{data.notes} &nbsp;&nbsp;{data.hot} &nbsp;&nbsp;{data.vip} &nbsp;&nbsp;{data.outfront} &nbsp;&nbsp;{data.pspot} &nbsp;&nbsp;{data.license}&nbsp;</td>\r\n                      </td>\r\n                      \r\n\r\n                    \r\n                    \r\n                  )}\r\n                  {windowSize.innerWidth < \"1000\" &&(\r\n                  <td className=\"listbtn\">\r\n\r\n                    {!data.complete && (\r\n                      <button className=\"but procbtn\" value={data._id}\r\n                        onClick={handleModal}>Process...&nbsp;&nbsp;&nbsp;</button>)}\r\n\r\n                    {list===\"pulls\" && data.complete && !data.hot &&(\r\n                      <button className=\"but\" value={data._id}\r\n                        onClick={handleComp}>Completed</button>\r\n                    )}\r\n\r\n                    {list===\"pulls\" && data.complete && data.hot &&(\r\n                      <button className=\"but roombtn\" value={data._id}\r\n                        onClick={handleModal}>&nbsp;+ Room&nbsp;&nbsp;&nbsp;&nbsp;</button>\r\n                    )}\r\n\r\n                    {list===\"outs\" && (\r\n                      <button className=\"but\" value={data._id}\r\n                        onClick={handleOuts} >Checkout</button>\r\n                    )}\r\n\r\n                    <button className=\"but editbtn\" type=\"button\"  value={data._id} onClick={handleUpdate}>Edit</button>\r\n                      {data.complete && (\r\n                      <button className=\"but parkbtn\" value={data._id}\r\n                        onClick={handleRepark}>Repark</button>\r\n                    )}\r\n\r\n                    {data.status===\"process\" && (\r\n                      <button className=\"but parkbtn\" value={data._id}\r\n                        onClick={handleRepark}>Repark</button>\r\n                    )}\r\n\r\n                   {/* <button className=\"but parkbtn\" type=\"button\"  value={data._id} onClick={() => dispatch(deletePull(data._id)) && dispatch(deleteCar(data._id))\r\n                      && dispatch(deleteComp(data._id)) && dispatch(deleteOut(data._id))}>\r\n                   Delete</button>*/}\r\n                  </td>)}\r\n                </tr>\r\n              );\r\n            })}\r\n        </tbody>    \r\n            );\r\n  };\r\n  \r\n  export default TableBody;"]},"metadata":{},"sourceType":"module"}