{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"C:/Users/Chris/Documents/GitHub/ValetProUser/Client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useCallback}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{Routes,Route,Link,useLocation}from\"react-router-dom\";import\"bootstrap/dist/css/bootstrap.min.css\";import\"./User.css\";import{logout}from\"../_actions/auth\";import{clearMessage}from\"../_actions/message\";// import AuthVerify from \"./common/AuthVerify\";\nimport EventBus from\"./common/EventBus\";var User=function User(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showModeratorBoard=_useState2[0],setShowModeratorBoard=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showAdminBoard=_useState4[0],setShowAdminBoard=_useState4[1];var _useSelector=useSelector(function(state){return state.auth;}),currentUser=_useSelector.user;var dispatch=useDispatch();var location=useLocation();useEffect(function(){if([\"/login\",\"/register\"].includes(location.pathname)){dispatch(clearMessage());// clear message when changing location\n}},[dispatch,location]);var logOut=useCallback(function(){dispatch(logout());},[dispatch]);useEffect(function(){if(currentUser){setShowModeratorBoard(currentUser.roles.includes(\"ROLE_MODERATOR\"));setShowAdminBoard(currentUser.roles.includes(\"ROLE_ADMIN\"));}else{setShowModeratorBoard(false);setShowAdminBoard(false);}EventBus.on(\"logout\",function(){logOut();});return function(){EventBus.remove(\"logout\");};},[currentUser,logOut]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar navbar-expand navbar-dark bg-dark\",children:[/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"navbar-brand\",children:\"Valet Pro\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"navbar-nav mr-auto\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/home\",className:\"nav-link\",children:\"Home\"})}),showModeratorBoard&&/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/mod\",className:\"nav-link\",children:\"Moderator Board\"})}),showAdminBoard&&/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/admin\",className:\"nav-link\",children:\"Admin Board\"})}),currentUser&&/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/user\",className:\"nav-link\",children:\"User\"})})]}),/*#__PURE__*/_jsx(\"div\",{}),currentUser?/*#__PURE__*/_jsxs(\"div\",{className:\"navbar-nav ml-auto\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/profile\",className:\"nav-link\",children:currentUser.username})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(\"a\",{href:\"/login\",className:\"nav-link\",onClick:logOut,children:\"LogOut\"})})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"navbar-nav ml-auto\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/login\",className:\"nav-link\",children:\"Login\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"nav-link\",children:\"Sign Up\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"container mt-3\"})]});};export default User;","map":{"version":3,"sources":["C:/Users/Chris/Documents/GitHub/ValetProUser/Client/src/_user/User.js"],"names":["React","useState","useEffect","useCallback","useDispatch","useSelector","Routes","Route","Link","useLocation","logout","clearMessage","EventBus","User","showModeratorBoard","setShowModeratorBoard","showAdminBoard","setShowAdminBoard","state","auth","currentUser","user","dispatch","location","includes","pathname","logOut","roles","on","remove","username"],"mappings":"kQAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,CAAqCC,WAArC,KAAwD,OAAxD,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,MAAT,CAAiBC,KAAjB,CAAwBC,IAAxB,CAA8BC,WAA9B,KAAiD,kBAAjD,CAEA,MAAO,sCAAP,CACA,MAAO,YAAP,CAEA,OAASC,MAAT,KAAuB,kBAAvB,CACA,OAASC,YAAT,KAA6B,qBAA7B,CAEA;AACA,MAAOC,CAAAA,QAAP,KAAqB,mBAArB,CAEA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,EAAM,eACmCZ,QAAQ,CAAC,KAAD,CAD3C,wCACVa,kBADU,eACUC,qBADV,8BAE2Bd,QAAQ,CAAC,KAAD,CAFnC,yCAEVe,cAFU,eAEMC,iBAFN,gCAIaZ,WAAW,CAAC,SAACa,KAAD,QAAWA,CAAAA,KAAK,CAACC,IAAjB,EAAD,CAJxB,CAIHC,WAJG,cAITC,IAJS,CAKjB,GAAMC,CAAAA,QAAQ,CAAGlB,WAAW,EAA5B,CAEA,GAAImB,CAAAA,QAAQ,CAAGd,WAAW,EAA1B,CAEAP,SAAS,CAAC,UAAM,CACd,GAAI,CAAC,QAAD,CAAW,WAAX,EAAwBsB,QAAxB,CAAiCD,QAAQ,CAACE,QAA1C,CAAJ,CAAyD,CACvDH,QAAQ,CAACX,YAAY,EAAb,CAAR,CAA0B;AAC3B,CACF,CAJQ,CAIN,CAACW,QAAD,CAAWC,QAAX,CAJM,CAAT,CAMA,GAAMG,CAAAA,MAAM,CAAGvB,WAAW,CAAC,UAAM,CAC/BmB,QAAQ,CAACZ,MAAM,EAAP,CAAR,CACD,CAFyB,CAEvB,CAACY,QAAD,CAFuB,CAA1B,CAIApB,SAAS,CAAC,UAAM,CACd,GAAIkB,WAAJ,CAAiB,CACfL,qBAAqB,CAACK,WAAW,CAACO,KAAZ,CAAkBH,QAAlB,CAA2B,gBAA3B,CAAD,CAArB,CACAP,iBAAiB,CAACG,WAAW,CAACO,KAAZ,CAAkBH,QAAlB,CAA2B,YAA3B,CAAD,CAAjB,CACD,CAHD,IAGO,CACLT,qBAAqB,CAAC,KAAD,CAArB,CACAE,iBAAiB,CAAC,KAAD,CAAjB,CACD,CAEDL,QAAQ,CAACgB,EAAT,CAAY,QAAZ,CAAsB,UAAM,CAC1BF,MAAM,GACP,CAFD,EAIA,MAAO,WAAM,CACXd,QAAQ,CAACiB,MAAT,CAAgB,QAAhB,EACD,CAFD,CAGD,CAhBQ,CAgBN,CAACT,WAAD,CAAcM,MAAd,CAhBM,CAAT,CAkBA,mBACE,oCACE,aAAK,SAAS,CAAC,0CAAf,wBACE,KAAC,IAAD,EAAM,EAAE,CAAE,GAAV,CAAe,SAAS,CAAC,cAAzB,uBADF,cAIE,aAAK,SAAS,CAAC,oBAAf,wBACE,WAAI,SAAS,CAAC,UAAd,uBACE,KAAC,IAAD,EAAM,EAAE,CAAE,OAAV,CAAmB,SAAS,CAAC,UAA7B,kBADF,EADF,CAOGZ,kBAAkB,eACjB,WAAI,SAAS,CAAC,UAAd,uBACE,KAAC,IAAD,EAAM,EAAE,CAAE,MAAV,CAAkB,SAAS,CAAC,UAA5B,6BADF,EARJ,CAeGE,cAAc,eACb,WAAI,SAAS,CAAC,UAAd,uBACE,KAAC,IAAD,EAAM,EAAE,CAAE,QAAV,CAAoB,SAAS,CAAC,UAA9B,yBADF,EAhBJ,CAuBGI,WAAW,eACV,WAAI,SAAS,CAAC,UAAd,uBACE,KAAC,IAAD,EAAM,EAAE,CAAE,OAAV,CAAmB,SAAS,CAAC,UAA7B,kBADF,EAxBJ,GAJF,cAmCE,cAnCF,CAqCGA,WAAW,cACV,aAAK,SAAS,CAAC,oBAAf,wBACE,WAAI,SAAS,CAAC,UAAd,uBACE,KAAC,IAAD,EAAM,EAAE,CAAE,UAAV,CAAsB,SAAS,CAAC,UAAhC,UACGA,WAAW,CAACU,QADf,EADF,EADF,cAME,WAAI,SAAS,CAAC,UAAd,uBACE,UAAG,IAAI,CAAC,QAAR,CAAiB,SAAS,CAAC,UAA3B,CAAsC,OAAO,CAAEJ,MAA/C,oBADF,EANF,GADU,cAcV,aAAK,SAAS,CAAC,oBAAf,wBACE,WAAI,SAAS,CAAC,UAAd,uBACE,KAAC,IAAD,EAAM,EAAE,CAAE,QAAV,CAAoB,SAAS,CAAC,UAA9B,mBADF,EADF,cAOE,WAAI,SAAS,CAAC,UAAd,uBACE,KAAC,IAAD,EAAM,EAAE,CAAE,WAAV,CAAuB,SAAS,CAAC,UAAjC,qBADF,EAPF,GAnDJ,GADF,cAoEE,YAAK,SAAS,CAAC,gBAAf,EApEF,GADF,CA4ED,CAjHD,CAmHA,cAAeb,CAAAA,IAAf","sourcesContent":["import React, { useState, useEffect, useCallback } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Routes, Route, Link, useLocation } from \"react-router-dom\";\r\n\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport \"./User.css\";\r\n\r\nimport { logout } from \"../_actions/auth\";\r\nimport { clearMessage } from \"../_actions/message\";\r\n\r\n// import AuthVerify from \"./common/AuthVerify\";\r\nimport EventBus from \"./common/EventBus\";\r\n\r\nconst User = () => {\r\n  const [showModeratorBoard, setShowModeratorBoard] = useState(false);\r\n  const [showAdminBoard, setShowAdminBoard] = useState(false);\r\n\r\n  const { user: currentUser } = useSelector((state) => state.auth);\r\n  const dispatch = useDispatch();\r\n\r\n  let location = useLocation();\r\n\r\n  useEffect(() => {\r\n    if ([\"/login\", \"/register\"].includes(location.pathname)) {\r\n      dispatch(clearMessage()); // clear message when changing location\r\n    }\r\n  }, [dispatch, location]);\r\n\r\n  const logOut = useCallback(() => {\r\n    dispatch(logout());\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    if (currentUser) {\r\n      setShowModeratorBoard(currentUser.roles.includes(\"ROLE_MODERATOR\"));\r\n      setShowAdminBoard(currentUser.roles.includes(\"ROLE_ADMIN\"));\r\n    } else {\r\n      setShowModeratorBoard(false);\r\n      setShowAdminBoard(false);\r\n    }\r\n\r\n    EventBus.on(\"logout\", () => {\r\n      logOut();\r\n    });\r\n\r\n    return () => {\r\n      EventBus.remove(\"logout\");\r\n    };\r\n  }, [currentUser, logOut]);\r\n\r\n  return (\r\n    <div>\r\n      <nav className=\"navbar navbar-expand navbar-dark bg-dark\">\r\n        <Link to={\"/\"} className=\"navbar-brand\">\r\n          Valet Pro\r\n        </Link>\r\n        <div className=\"navbar-nav mr-auto\">\r\n          <li className=\"nav-item\">\r\n            <Link to={\"/home\"} className=\"nav-link\">\r\n              Home\r\n            </Link>\r\n          </li>\r\n\r\n          {showModeratorBoard && (\r\n            <li className=\"nav-item\">\r\n              <Link to={\"/mod\"} className=\"nav-link\">\r\n                Moderator Board\r\n              </Link>\r\n            </li>\r\n          )}\r\n\r\n          {showAdminBoard && (\r\n            <li className=\"nav-item\">\r\n              <Link to={\"/admin\"} className=\"nav-link\">\r\n                Admin Board\r\n              </Link>\r\n            </li>\r\n          )}\r\n\r\n          {currentUser && (\r\n            <li className=\"nav-item\">\r\n              <Link to={\"/user\"} className=\"nav-link\">\r\n                User\r\n              </Link>\r\n            </li>\r\n          )}\r\n        </div>\r\n        <div></div>\r\n\r\n        {currentUser ? (\r\n          <div className=\"navbar-nav ml-auto\">\r\n            <li className=\"nav-item\">\r\n              <Link to={\"/profile\"} className=\"nav-link\">\r\n                {currentUser.username}\r\n              </Link>\r\n            </li>\r\n            <li className=\"nav-item\">\r\n              <a href=\"/login\" className=\"nav-link\" onClick={logOut}>\r\n                LogOut\r\n              </a>\r\n            </li>\r\n          </div>\r\n        ) : (\r\n          <div className=\"navbar-nav ml-auto\">\r\n            <li className=\"nav-item\">\r\n              <Link to={\"/login\"} className=\"nav-link\">\r\n                Login\r\n              </Link>\r\n            </li>\r\n\r\n            <li className=\"nav-item\">\r\n              <Link to={\"/register\"} className=\"nav-link\">\r\n                Sign Up\r\n              </Link>\r\n            </li>\r\n          </div>\r\n        )}\r\n      </nav>\r\n\r\n      <div className=\"container mt-3\">\r\n     \r\n      </div>\r\n\r\n      {/* <AuthVerify logOut={logOut}/> */}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default User;"]},"metadata":{},"sourceType":"module"}