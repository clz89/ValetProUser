{"ast":null,"code":"\"use strict\";\n\nvar __values = this && this.__values || function (o) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator],\n      i = 0;\n  if (m) return m.call(o);\n  return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n/**\r\n * RSS util functions.\r\n */\n\nvar RSSUtils =\n/** @class */\nfunction () {\n  function RSSUtils() {}\n\n  RSSUtils.prototype.RSSUtils = function () {};\n\n  RSSUtils.getRSSvalue = function (widths, maxWidth, noNarrow) {\n    var e_1, _a;\n\n    var n = 0;\n\n    try {\n      for (var widths_1 = __values(widths), widths_1_1 = widths_1.next(); !widths_1_1.done; widths_1_1 = widths_1.next()) {\n        var width = widths_1_1.value;\n        n += width;\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (widths_1_1 && !widths_1_1.done && (_a = widths_1.return)) _a.call(widths_1);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n\n    var val = 0;\n    var narrowMask = 0;\n    var elements = widths.length;\n\n    for (var bar = 0; bar < elements - 1; bar++) {\n      var elmWidth = void 0;\n\n      for (elmWidth = 1, narrowMask |= 1 << bar; elmWidth < widths[bar]; elmWidth++, narrowMask &= ~(1 << bar)) {\n        var subVal = RSSUtils.combins(n - elmWidth - 1, elements - bar - 2);\n\n        if (noNarrow && narrowMask === 0 && n - elmWidth - (elements - bar - 1) >= elements - bar - 1) {\n          subVal -= RSSUtils.combins(n - elmWidth - (elements - bar), elements - bar - 2);\n        }\n\n        if (elements - bar - 1 > 1) {\n          var lessVal = 0;\n\n          for (var mxwElement = n - elmWidth - (elements - bar - 2); mxwElement > maxWidth; mxwElement--) {\n            lessVal += RSSUtils.combins(n - elmWidth - mxwElement - 1, elements - bar - 3);\n          }\n\n          subVal -= lessVal * (elements - 1 - bar);\n        } else if (n - elmWidth > maxWidth) {\n          subVal--;\n        }\n\n        val += subVal;\n      }\n\n      n -= elmWidth;\n    }\n\n    return val;\n  };\n\n  RSSUtils.combins = function (n, r) {\n    var maxDenom;\n    var minDenom;\n\n    if (n - r > r) {\n      minDenom = r;\n      maxDenom = n - r;\n    } else {\n      minDenom = n - r;\n      maxDenom = r;\n    }\n\n    var val = 1;\n    var j = 1;\n\n    for (var i = n; i > maxDenom; i--) {\n      val *= i;\n\n      if (j <= minDenom) {\n        val /= j;\n        j++;\n      }\n    }\n\n    while (j <= minDenom) {\n      val /= j;\n      j++;\n    }\n\n    return val;\n  };\n\n  return RSSUtils;\n}();\n\nexports.default = RSSUtils;","map":{"version":3,"sources":["../../../../src/core/oned/rss/RSSUtils.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;;AAEG;;AACH,IAAA,QAAA;AAAA;AAAA,YAAA;AAAA,WAAA,QAAA,GAAA,CA4DC;;AA1DW,EAAA,QAAA,CAAA,SAAA,CAAA,QAAA,GAAR,YAAA,CAAsB,CAAd;;AAEM,EAAA,QAAA,CAAA,WAAA,GAAd,UAA0B,MAA1B,EAA4C,QAA5C,EAA8D,QAA9D,EAA+E;;;AAC3E,QAAI,CAAC,GAAG,CAAR;;;AACA,WAAkB,IAAA,QAAA,GAAA,QAAA,CAAA,MAAA,CAAA,EAAM,UAAA,GAAA,QAAA,CAAA,IAAA,EAAxB,EAAwB,CAAA,UAAA,CAAA,IAAxB,EAAwB,UAAA,GAAA,QAAA,CAAA,IAAA,EAAxB,EAA0B;AAArB,YAAI,KAAK,GAAA,UAAA,CAAA,KAAT;AACD,QAAA,CAAC,IAAI,KAAL;AACH;;;;;;;;;;;;;AACD,QAAI,GAAG,GAAG,CAAV;AACA,QAAI,UAAU,GAAG,CAAjB;AACA,QAAI,QAAQ,GAAG,MAAM,CAAC,MAAtB;;AACA,SAAK,IAAI,GAAG,GAAG,CAAf,EAAkB,GAAG,GAAG,QAAQ,GAAG,CAAnC,EAAsC,GAAG,EAAzC,EAA6C;AACzC,UAAI,QAAQ,GAAA,KAAA,CAAZ;;AACA,WAAK,QAAQ,GAAG,CAAX,EAAc,UAAU,IAAI,KAAK,GAAtC,EAA2C,QAAQ,GAAG,MAAM,CAAC,GAAD,CAA5D,EAAmE,QAAQ,IAAK,UAAU,IAAI,EAAE,KAAK,GAAP,CAA9F,EAA2G;AACvG,YAAI,MAAM,GAAG,QAAQ,CAAC,OAAT,CAAiB,CAAC,GAAG,QAAJ,GAAe,CAAhC,EAAmC,QAAQ,GAAG,GAAX,GAAiB,CAApD,CAAb;;AACA,YAAI,QAAQ,IAAK,UAAU,KAAK,CAA5B,IAAmC,CAAC,GAAG,QAAJ,IAAgB,QAAQ,GAAG,GAAX,GAAiB,CAAjC,KAAuC,QAAQ,GAAG,GAAX,GAAiB,CAA/F,EAAmG;AAC/F,UAAA,MAAM,IAAI,QAAQ,CAAC,OAAT,CAAiB,CAAC,GAAG,QAAJ,IAAgB,QAAQ,GAAG,GAA3B,CAAjB,EAAkD,QAAQ,GAAG,GAAX,GAAiB,CAAnE,CAAV;AACH;;AACD,YAAI,QAAQ,GAAG,GAAX,GAAiB,CAAjB,GAAqB,CAAzB,EAA4B;AACxB,cAAI,OAAO,GAAG,CAAd;;AACA,eAAK,IAAI,UAAU,GAAG,CAAC,GAAG,QAAJ,IAAgB,QAAQ,GAAG,GAAX,GAAiB,CAAjC,CAAtB,EAA2D,UAAU,GAAG,QAAxE,EAAkF,UAAU,EAA5F,EAAgG;AAC5F,YAAA,OAAO,IAAI,QAAQ,CAAC,OAAT,CAAiB,CAAC,GAAG,QAAJ,GAAe,UAAf,GAA4B,CAA7C,EAAgD,QAAQ,GAAG,GAAX,GAAiB,CAAjE,CAAX;AACH;;AACD,UAAA,MAAM,IAAI,OAAO,IAAI,QAAQ,GAAG,CAAX,GAAe,GAAnB,CAAjB;AACH,SAND,MAMO,IAAI,CAAC,GAAG,QAAJ,GAAe,QAAnB,EAA6B;AAChC,UAAA,MAAM;AACT;;AACD,QAAA,GAAG,IAAI,MAAP;AACH;;AACD,MAAA,CAAC,IAAI,QAAL;AACH;;AACD,WAAO,GAAP;AACH,GA7Ba;;AA+BC,EAAA,QAAA,CAAA,OAAA,GAAf,UAAuB,CAAvB,EAAkC,CAAlC,EAA2C;AACvC,QAAI,QAAJ;AACA,QAAI,QAAJ;;AACA,QAAI,CAAC,GAAG,CAAJ,GAAQ,CAAZ,EAAe;AACX,MAAA,QAAQ,GAAG,CAAX;AACA,MAAA,QAAQ,GAAG,CAAC,GAAG,CAAf;AACH,KAHD,MAGO;AACH,MAAA,QAAQ,GAAG,CAAC,GAAG,CAAf;AACA,MAAA,QAAQ,GAAG,CAAX;AACH;;AACD,QAAI,GAAG,GAAG,CAAV;AACA,QAAI,CAAC,GAAG,CAAR;;AACA,SAAK,IAAI,CAAC,GAAW,CAArB,EAAwB,CAAC,GAAG,QAA5B,EAAsC,CAAC,EAAvC,EAA2C;AACvC,MAAA,GAAG,IAAI,CAAP;;AACA,UAAI,CAAC,IAAI,QAAT,EAAmB;AACf,QAAA,GAAG,IAAI,CAAP;AACA,QAAA,CAAC;AACJ;AACJ;;AACD,WAAQ,CAAC,IAAI,QAAb,EAAwB;AACpB,MAAA,GAAG,IAAI,CAAP;AACA,MAAA,CAAC;AACJ;;AACD,WAAO,GAAP;AACH,GAxBc;;AAyBnB,SAAA,QAAA;AAAC,CA5DD,EAAA","sourceRoot":"","sourcesContent":["\"use strict\";\r\nvar __values = (this && this.__values) || function (o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n/**\r\n * RSS util functions.\r\n */\r\nvar RSSUtils = /** @class */ (function () {\r\n    function RSSUtils() {\r\n    }\r\n    RSSUtils.prototype.RSSUtils = function () { };\r\n    RSSUtils.getRSSvalue = function (widths, maxWidth, noNarrow) {\r\n        var e_1, _a;\r\n        var n = 0;\r\n        try {\r\n            for (var widths_1 = __values(widths), widths_1_1 = widths_1.next(); !widths_1_1.done; widths_1_1 = widths_1.next()) {\r\n                var width = widths_1_1.value;\r\n                n += width;\r\n            }\r\n        }\r\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\r\n        finally {\r\n            try {\r\n                if (widths_1_1 && !widths_1_1.done && (_a = widths_1.return)) _a.call(widths_1);\r\n            }\r\n            finally { if (e_1) throw e_1.error; }\r\n        }\r\n        var val = 0;\r\n        var narrowMask = 0;\r\n        var elements = widths.length;\r\n        for (var bar = 0; bar < elements - 1; bar++) {\r\n            var elmWidth = void 0;\r\n            for (elmWidth = 1, narrowMask |= 1 << bar; elmWidth < widths[bar]; elmWidth++, narrowMask &= ~(1 << bar)) {\r\n                var subVal = RSSUtils.combins(n - elmWidth - 1, elements - bar - 2);\r\n                if (noNarrow && (narrowMask === 0) && (n - elmWidth - (elements - bar - 1) >= elements - bar - 1)) {\r\n                    subVal -= RSSUtils.combins(n - elmWidth - (elements - bar), elements - bar - 2);\r\n                }\r\n                if (elements - bar - 1 > 1) {\r\n                    var lessVal = 0;\r\n                    for (var mxwElement = n - elmWidth - (elements - bar - 2); mxwElement > maxWidth; mxwElement--) {\r\n                        lessVal += RSSUtils.combins(n - elmWidth - mxwElement - 1, elements - bar - 3);\r\n                    }\r\n                    subVal -= lessVal * (elements - 1 - bar);\r\n                }\r\n                else if (n - elmWidth > maxWidth) {\r\n                    subVal--;\r\n                }\r\n                val += subVal;\r\n            }\r\n            n -= elmWidth;\r\n        }\r\n        return val;\r\n    };\r\n    RSSUtils.combins = function (n, r) {\r\n        var maxDenom;\r\n        var minDenom;\r\n        if (n - r > r) {\r\n            minDenom = r;\r\n            maxDenom = n - r;\r\n        }\r\n        else {\r\n            minDenom = n - r;\r\n            maxDenom = r;\r\n        }\r\n        var val = 1;\r\n        var j = 1;\r\n        for (var i = n; i > maxDenom; i--) {\r\n            val *= i;\r\n            if (j <= minDenom) {\r\n                val /= j;\r\n                j++;\r\n            }\r\n        }\r\n        while ((j <= minDenom)) {\r\n            val /= j;\r\n            j++;\r\n        }\r\n        return val;\r\n    };\r\n    return RSSUtils;\r\n}());\r\nexports.default = RSSUtils;\r\n//# sourceMappingURL=RSSUtils.js.map"]},"metadata":{},"sourceType":"script"}